{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 9af43c8b1cd643fdbf7a","webpack:///./src/shape/Shape.js","webpack:///./src/core/util.js","webpack:///./index.js","webpack:///./src/krender.js","webpack:///./src/core/guid.js","webpack:///./src/Storage.js","webpack:///./src/Painter.js","webpack:///./src/Handler.js","webpack:///./src/config.js","webpack:///./src/core/EventEmitter.js","webpack:///./src/shape.js","webpack:///./src/shape/Circle.js","webpack:///./src/core/area.js","webpack:///./src/tool/color.js","webpack:///./src/shape/Rect.js","webpack:///./src/shape/Path.js","webpack:///./src/shape/Line.js","webpack:///./src/shape/BezierCurve.js","webpack:///./src/shape/BrokenLine.js"],"names":[],"mappings":"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","file":"krender.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"krender\"] = factory();\n\telse\n\t\troot[\"krender\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"release\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9af43c8b1cd643fdbf7a","import area from '../core/area';\nimport color from '../tool/color';\n\n/**\n * 1.\n * 2.\n * 3.\n * 4.\n * 5.\n * \n */\nclass Shape {\n\n    constructor() {\n\n    }\n\n    /**\n     * \n     * @param ctx       \n     * @param el         \n     * @param isHighlight   \n     * @param updateCallback shapecallback(el)\n     *                       paintershape.brushbrush\n     */\n    brush(ctx, el, isHighlight) {\n        var style = el.style || {};\n        var highlightStyle = el.highlightStyle || {};\n\n        if (this.brushTypeOnly) {\n            style.brushType = this.brushTypeOnly;\n        }\n\n        if (isHighlight) {\n            style = this.getHighlightStyle(style, highlightStyle, this.brushTypeOnly);\n        }\n\n        if (this.brushTypeOnly == 'stroke') {\n            style.strokeColor = style.strokeColor || style.color;\n        }\n\n        ctx.save();\n        this.setContext(ctx, style);\n\n        if (el.__needTransform) {\n            ctx.transform.apply(ctx, this.updateTransform(el));\n        }\n\n        ctx.beginPath();\n        this.buildPath(ctx, style);\n        if (this.brushTypeOnly != 'stroke') {\n            ctx.closePath();\n        }\n\n        switch (style.brushType) {\n            case 'fill':\n                ctx.fill();\n                break;\n            case 'stroke':\n                ctx.stroke();\n                break;\n            case 'both':\n                ctx.stroke();\n                ctx.fill();\n                break;\n            default:\n                ctx.fill();\n        }\n\n        if (style.text) {\n            this.drawText(ctx, style, el.style);\n        }\n\n        ctx.restore();\n\n        return this;\n    }\n\n    /**\n     * \n     * @param ctx       \n     * @param style     \n     */\n    setContext(ctx, style) {\n        if (style.color) {\n            ctx.fillStyle = style.color;\n        }\n        if (style.strokeColor) {\n            ctx.strokeStyle = style.strokeColor;\n        }\n        if (typeof style.opcacity != 'undefined') {\n            ctx.globalAlpha = style.opcacity;\n        }\n        if (style.lineCap) {\n            ctx.lineCap = style.lineCap;\n        }\n        if (style.lineJoin) {\n            ctx.lineJoin = style.lineJoin;\n        }\n        if (style.miterLimit) {\n            ctx.miterLimit = style.miterLimit;\n        }\n        if (typeof style.lineWidth != 'undefined') {\n            ctx.lineWidth = style.lineWidth;\n        }\n        if (typeof style.shadowBlur != 'undefined') {\n            ctx.shadowBlur = style.shadowBlur;\n        }\n        if (style.shadowColor) {\n            ctx.shadowColor = style.shadowColor;\n        }\n        if (typeof style.shadowOffsetX != 'undefined') {\n            ctx.shadowOffsetX = style.shadowOffsetX;\n        }\n        if (typeof style.shadowOffsetY != 'undefined') {\n            ctx.shadowOffsetY = style.shadowOffsetY;\n        }\n    }\n\n    /**\n     * \n     * @param {Context2D} ctx Canvas 2D\n     * @param {Object} style \n     * @param {Object} normalStyle \n     */\n    drawText(ctx, style, normalStyle) {\n        console.log('drawText:', style.text);\n    }\n\n    /**\n     * \n     * @param ctx Canvas 2D\n     * @param {Object} style \n     * @param {Object} highlightStyle \n     */\n    getHighlightStyle(style, highlightStyle, brushTypeOnly) {\n        var highlightColor = color.getHighlightColor();\n\n        var newStyle = {};\n        for (var key in style) {\n            newStyle[key] = style[key];\n        }\n\n        newStyle.strokeColor = highlightStyle.strokeColor || 'rgba(50, 132, 255, 1)';// TODO\n\n        for (var key in highlightStyle) {\n            newStyle[key] = highlightStyle[key];\n        }\n\n        return newStyle;\n    }\n\n    getHighlightZoom() {\n\n    }\n\n    drift() {\n\n    }\n\n    /**\n     * \n     * @param el \n     * @param x \n     * @param y \n     */\n    isCover(el, x, y) {\n        var rect;\n        if (el.style.__rect) {\n            rect = el.style.__rect;\n        } else {\n            rect = this.getRect(el.style);\n            rect = [\n                rect.x, rect.x + rect.width,\n                rect.y, rect.y + rect.height\n            ];\n            el.style.__rect = rect;\n        }\n\n        if (x >= rect[0] && x <= rect[1] && y >= rect[2] && y <= rect[3]) {\n            return area.isInside(this, el.style, x, y);\n        } else {\n            return false;\n        }\n    }\n\n    updateTransform() {\n        console.log('updateTransform');\n    }\n}\n\nexport default Shape;\n\n\n// WEBPACK FOOTER //\n// ./src/shape/Shape.js","/**\n * object\n *\n * @param {Any} source \n * @return {Any} \n */\nfunction clone(source) {\n    // buildInObject, Date\n    var buildInObject = {\n        '[object Function]': 1,\n        '[object RegExp]': 1,\n        '[object Date]': 1,\n        '[object Error]': 1,\n        '[object CanvasGradient]': 1\n    };\n    var result = source;\n    var i;\n    var len;\n    if (!source\n        || source instanceof Number\n        || source instanceof String\n        || source instanceof Boolean\n    ) {\n        return result;\n    }\n    else if (source instanceof Array) {\n        result = [];\n        var resultLen = 0;\n        for (i = 0, len = source.length; i < len; i++) {\n            result[resultLen++] = this.clone(source[i]);\n        }\n    }\n    else if ('object' == typeof source) {\n        if(buildInObject[Object.prototype.toString.call(source)]\n            || source.__nonRecursion\n        ) {\n            return result;\n        }\n        result = {};\n        for (i in source) {\n            if (source.hasOwnProperty(i)) {\n                result[i] = this.clone(source[i]);\n            }\n        }\n    }\n    return result;\n}\n\n/**\n * \n * modify from Tangram\n * @param {*} target \n * @param {*} source \n * @param {Object} optOptions \n * @param {boolean} optOptions.overwrite \n * @param {boolean} optOptions.recursive \n * @param {boolean} optOptions.whiteList \n */\nvar merge = (function() {\n    // buildInObject, Date\n    var buildInObject = {\n        '[object Function]': 1,\n        '[object RegExp]': 1,\n        '[object Date]': 1,\n        '[object Error]': 1,\n        '[object CanvasGradient]': 1\n    };\n    function mergeItem(target, source, index, overwrite, recursive) {\n        if (source.hasOwnProperty(index)) {\n            if (recursive\n                && typeof target[index] == 'object'\n                && buildInObject[\n                    Object.prototype.toString.call(target[index])\n                ] != 1\n            ) {\n                // merge\n                merge(\n                    target[index],\n                    source[index],\n                    {\n                        'overwrite': overwrite,\n                        'recursive': recursive\n                    }\n                );\n            } else if (overwrite || !(index in target)) {\n                // overwritetrue\n                target[index] = source[index];\n            }\n        }\n    }\n\n    return function(target, source, optOptions){\n        var i = 0,\n            options = optOptions || {},\n            overwrite = options['overwrite'],\n            whiteList = options['whiteList'],\n            recursive = options['recursive'],\n            len;\n\n        // \n        if (whiteList && whiteList.length) {\n            len = whiteList.length;\n            for (; i < len; ++i) {\n                mergeItem(\n                    target, source, whiteList[i], overwrite, recursive\n                );\n            }\n        } else {\n            for (i in source) {\n                mergeItem(target, source, i, overwrite, recursive);\n            }\n        }\n        return target;\n    };\n})();\n\nvar _ctx;\n\nfunction getContext() {\n    if (!_ctx) {\n        _ctx = document.createElement('canvas').getContext('2d');\n    }\n    return _ctx;\n}\n\n\nvar _canvas;\nvar _pixelCtx;\nvar _width;\nvar _height;\nvar _offsetX = 0;\nvar _offsetY = 0;\n\n/**\n * \n * @return {Object} \n */\nfunction getPixelContext() {\n    if (!_pixelCtx) {\n        _canvas = document.createElement('canvas');\n        _width = _canvas.width;\n        _height = _canvas.height;\n        _pixelCtx = _canvas.getContext('2d');\n    }\n    return _pixelCtx;\n}\n\n/**\n * _canvas_canvas\n * @param {number} x : \n * @param {number} y : \n *  canvas translate\n */\nfunction adjustCanvasSize(x, y) {\n    // \n    var _v = 100;\n    var _flag = false;\n\n    if (x + _offsetX > _width) {\n        _width = x + _offsetX + _v;\n        _canvas.width = _width;\n        _flag = true;\n    }\n\n    if (y + _offsetY > _height) {\n        _height = y + _offsetY + _v;\n        _canvas.height = _height;\n        _flag = true;\n    }\n\n    if (x < -_offsetX) {\n        _offsetX = Math.ceil(-x / _v) * _v;\n        _width += _offsetX;\n        _canvas.width = _width;\n        _flag = true;\n    }\n\n    if (y < -_offsetY) {\n        _offsetY = Math.ceil(-y / _v) * _v;\n        _height += _offsetY;\n        _canvas.height = _height;\n        _flag = true;\n    }\n\n    if (_flag) {\n        _pixelCtx.translate(_offsetX, _offsetY);\n    }\n}\n\n/**\n * canvas\n * @return {Object} \n */\nfunction getPixelOffset() {\n    return {\n        x : _offsetX,\n        y : _offsetY\n    };\n}\n\n/**\n * index\n */\nfunction indexOf(array, value){\n    if (array.indexOf) {\n        return array.indexOf(value);\n    }\n    for(var i = 0, len=array.length; i<len; i++) {\n        if (array[i] === value) {\n            return i;\n        }\n    }\n    return -1;\n}\n\nexport default {\n    clone: clone,\n    merge: merge,\n    getContext: getContext,\n\n    getPixelContext: getPixelContext,\n    getPixelOffset: getPixelOffset,\n    adjustCanvasSize: adjustCanvasSize,\n\n    indexOf: indexOf\n};\n\n\n// WEBPACK FOOTER //\n// ./src/core/util.js","import krender from './src/krender';\n\nmodule.exports = krender;\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","import guid from './core/guid';\nimport Storage from './Storage';\nimport Painter from './Painter';\nimport Handler from './Handler';\nimport shape from './shape';\n\nvar instances = {};\n\nvar krender = {};\n\nkrender.version = '0.0.4';\n\n/**\n * krender\n * new KRender\n * @param {HTMLElement} dom dom\n * @param {Object} opts \n * @return {KRender} KRender\n */\nkrender.init = (dom, opts) => {\n    var kr = new KRender(guid(), dom, opts);\n    instances[kr.id] = kr;\n    return kr;\n};\n\n/**\n * kr\n * zr.dispose(kr)KRender\n * kr.dispose()\n * @param {KRender} kr KRender\n */\nkrender.dispose = (kr) => {\n    if (kr) {\n        kr.dispose();\n    } else {\n        for (var key in instances) {\n            if (instances.hasOwnProperty(key)) {\n                instances[key].dispose();\n            }\n        }\n        instances = {};\n    }\n    return krender;\n};\n\n/**\n * kr\n * @param {string} id KRender\n */\nkrender.getInstance = (id) => {\n    return instances[id];\n};\n\n/**\n * krKRenderdispose\n * @param {string} id KRender\n */\nkrender.delInstance = (id) => {\n    delete instances[id];\n};\n\n/**\n * KRender\n * storageMpainterVhandlerC\n *\n * @param {string} id \n * @param {HTMLElement} dom dom\n * @param {Object} params \n */\nclass KRender {\n    constructor(id, dom, opts) {\n\n        opts = opts || {};\n\n        this.dom = dom;\n\n        this.id = id;\n\n        var shapeLibrary;\n\n        if (typeof opts.shape == 'undefined') {\n            shapeLibrary = shape;\n        } else {\n            shapeLibrary = {};\n            for (var s in opts.shape) {\n                shapeLibrary[s] = opts.shape[s];\n            }\n            shapeLibrary.get = function(name) {\n                return shapeLibrary[name] || shape.get(name);\n            };\n        }\n\n        this.storage = new Storage(shapeLibrary);\n        this.painter = new Painter(dom, this.storage, shapeLibrary);\n        this.handler = new Handler(dom, this.storage, this.painter, shapeLibrary);\n\n\n    }\n\n    /**\n     * \n     * @param {Object} shape shape\n     */\n    addShape(shape) {\n        this.storage.add(shape);\n        return this;\n    }\n\n    /**\n     * \n     * @param {Object} shape \n     */\n    addHoverShape(shape) {\n        this.storage.addHover(shape);\n        return this;\n    }\n\n    /**\n     * \n     * @param {string} shapeId \n     * @param {Object} shape \n     */\n    modShape(shapeId, shape) {\n        this.storage.mod(shapeId, shape);\n        return this;\n    }\n\n\n    /**\n     * \n     * @param {Function} callback  \n     */\n    render(callback) {\n        this.painter.render(callback);\n        return this;\n    }\n\n    /**\n     * \n     * @param {Function} callback  \n     */\n    refresh(callback) {\n        this.painter.refresh(callback);\n        return this;\n    }\n\n    resize() {\n        this.painter.resize();\n        return this;\n    }\n\n    /**\n     * ID\n     * @param {string} [idPrefix] id\n     * @return {string} ID\n     */\n    newShapeId(idPrefix) {\n        return this.storage.newShapeId(idPrefix);\n    }\n\n    /**\n     * KRenderdomdisposeKRender\n     */\n    dispose() {\n        this.storage.disponse();\n        this.storage = null;\n\n        this.painter.dispose();\n        this.painter = null;\n\n        this.handler.dispose();\n        this.handler = null;\n\n        krender.delInstance(this.id);\n    }\n}\n\nexport default krender;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/krender.js","var idStart = 0x0907;\n\nexport default function () {\n    return idStart++;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/guid.js","import krUtil from './core/util';\n\n\nclass Storage {\n    /**\n     *  (M)\n     * @param {Object} shape \n     */\n    constructor(shape) {\n        // id\n        this._isBase = 0;\n        // idmap\n        this._elements = {};\n        // zzElements[0]zElements[1]\n        this._zElements = [];\n        // z\n        this._hoverElements = [];\n        // zlevel\n        this._maxZlevel = 0;\n        // zlevel\n        this._changedZlevel = {};\n    }\n\n    /**\n     * id\n     * @param {string} idHead \n     */\n    newShapeId(idHead) {\n        return (idHead || '') + (++this._isBase);\n    }\n\n    /**\n     * ~\n     * e.__silent hover\n     * e.__needTransform transform\n     * e.style.__rect \n     */\n    _mark(el) {\n        if (\n            el.hoverable || el.onclick || el.draggable \n            || el.onmousemove || el.onmouseover || el.onmouseout || el.onmousedown || el.onmouseup \n            || el.ondragenter || el.ondragover || el.ondragleave || el.ondrop\n        ) {\n            el.__silent = false;\n        } else {\n            el.__silent = true;\n        }\n\n        if (\n            Math.abs(el.rotation[0]) > 0.0001\n            || Math.abs(el.position[0]) > 0.0001 || Math.abs(el.position[1]) > 0.0001\n            || Math.abs(el.scale[0] - 1) > 0.0001 || Math.abs(el.scale[1] - 1) > 0.0001\n        ) {\n            el.__needTransform = true;\n        } else {\n            el.__needTransform = false;\n        }\n\n        el.style = el.style || {};\n        el.style.__rect = null;\n    }\n\n    /**\n     * \n     * @param {Object} shape \n     */\n    add(shape) {\n        var self = this;\n        var el = {\n            'shape': 'circle',// \n            'id': shape.id || self.newShapeId(),// \n            'zlevel': 0,// z\n            'draggable': false,// \n            'clickable': false,// \n            'hoverable': true,// \n            'position': [0, 0],\n            'rotation': [0, 0, 0],\n            'scale': [1, 1, 0, 0]\n        };\n\n        krUtil.merge(el, shape, {\n            'overwrite': true, 'recursive': true\n        });\n\n        this._mark(el);\n\n        this._elements[el.id] = el;\n        this._zElements[el.zlevel] = this._zElements[el.zlevel] || [];\n        this._zElements[el.zlevel].push(el);\n\n        this._maxZlevel = Math.max(this._maxZlevel, el.zlevel);\n        this._changedZlevel[el.zlevel] = true;\n    }\n\n    /**\n     * \n     * @param {string} idx \n     * @param {Object} shape\n     */\n    mod(shapeId, shape) {\n        var el = this._elements[shapeId];\n\n        if (el) {\n            this._changedZlevel[el.zlevel] = true;\n\n            krUtil.merge(el, shape, {\n                'overwrite': true, 'recursive': true\n            });\n\n            this._mark(el);\n            this._changedZlevel[el.zlevel] = true;\n            this._maxZlevel = Math.max(this._maxZlevel, el.zlevel);\n        }\n\n        return this;\n    }\n\n    /**\n     * \n     * @param {Object} shape \n     */\n    addHover(shape) {\n        this._hoverElements.push(shape);\n        return this;\n    }\n\n    /**\n     * \n     */\n    delHover() {\n        this._hoverElements = [];\n        return this;\n    }\n\n    hasHoverShape() {\n        return this._hoverElements.length > 0;\n    }\n\n    /**\n     * \n     * @param {Function} fn return true\n     * @param {Object} options \n     *     hover: true \n     *     normal: 'down' | 'up' | 'free' z\n     */\n    iterShape(fn, options) {\n        if (!options) {\n            options = {\n                hover: false, normal: 'down'\n            };\n        }\n        if (options.hover) {\n            // \n            for (var i = 0, l = this._hoverElements.length; i < l; i++) {\n                if (fn(this._hoverElements[i])) {\n                    return this;\n                }\n            }\n        }\n        var zlist, len;\n\n        if (typeof options.normal != 'undefined') {\n            // z: 'down' | 'up' | 'free'\n            switch (options.normal) {\n                case 'down':\n                    // \n                    for (var l = this._zElements.length - 1; l >= 0; l--) {\n                        zlist = this._zElements[l];\n                        if (zlist) {\n                            len = zlist.length;\n                            while (len--) {\n                                if (fn(zlist[len])) {\n                                    return this;\n                                }\n                            }\n                        }\n                    }\n                    break;\n                case 'up':\n                    // \n                    for (var i = 0, l = this._zElements.length; i < l; i++) {\n                        zlist = this._zElements[i];\n                        if (zlist) {\n                            len = zlist.length;\n                            for (var k = 0; k < len; k++) {\n                                if (fn(zlist[k])) {\n                                    return this;\n                                }\n                            }\n                        }\n                    }\n                    break;\n                default:\n                    // \n                    for (var i in this._elements) {\n                        if (fn(this._elements[i])) {\n                            return this;\n                        }\n                    }\n                    break;\n            }\n        }\n        return this;\n    }\n\n    getMaxZlevel() {\n        return this._maxZlevel;\n    }\n\n    getChangedZlevel() {\n        return this._changedZlevel;\n    }\n\n    setChangedZlevel(level) {\n        this._changedZlevel[level] = true;\n        return this;\n    }\n\n    clearChangedZlevel() {\n        this._changedZlevel = {};\n        return this;\n    }\n\n    /**\n     * \n     */\n    disponse() {\n        this._elements = null;\n        this._zElements = null;\n        this._hoverElements = null;\n    }\n}\n\nexport default Storage;\n\n\n// WEBPACK FOOTER //\n// ./src/Storage.js","\nclass Painter {\n    /**\n     *  (V)\n     * @param {HTMLElement} root \n     * @param {storage} storage Storage\n     * @param {Object} shape \n     */\n    constructor(root, storage, shape) {\n        this.root = root;\n        this.storage = storage;\n        this.shape = shape;\n\n        this._domList = {};// canvas dom\n        this._ctxList = {};// canvas 2D contextdomList\n\n        this._maxZlevel = 0;// zlevel\n\n        this._domRoot = document.createElement('div');\n        this._domRoot.onselectstart = function() {\n            return false;\n        };\n\n        this._width;// \n        this._height;// \n\n        this._init();\n    }\n\n    _init() {\n        this.root.innerHTML = '';\n        this._domRoot.innerHTML = '';\n\n        this._width = this._getWidth();\n        this._height = this._getHeight();\n        \n        this._domRoot.style.position = 'relative';\n        this._domRoot.style.overflow = 'hidden';\n        this._domRoot.style.width = this._width + 'px';\n        this._domRoot.style.height = this._height + 'px';\n\n        this.root.appendChild(this._domRoot);\n\n        this._domList = {};\n        this._ctxList = {};\n\n        this._maxZlevel = this.storage.getMaxZlevel();\n\n        this._domList['bg'] = this._createDom('bg', 'div');\n        this._domRoot.appendChild(this._domList['bg']);\n\n        for (var i = 0; i <= this._maxZlevel; i++) {\n            this._domList[i] = this._createDom(i, 'canvas');\n            this._domRoot.appendChild(this._domList[i]);\n            this._ctxList[i] = this._domList[i].getContext('2d');\n        }\n\n        this._domList['hover'] = this._createDom('hover', 'canvas');\n        this._domList['hover'].id = '_krender_hover_';\n        this._domRoot.appendChild(this._domList['hover']);\n        this._ctxList['hover'] = this._domList['hover'].getContext('2d');\n    }\n\n    _getWidth() {\n        var stl = this.root.currentStyle || document.defaultView.getComputedStyle(this.root);\n        return this.root.clientWidth - stl.paddingLeft.replace(/\\D/g, '') - stl.paddingRight.replace(/\\D/g, '');\n    }\n\n    _getHeight() {\n        var stl = this.root.currentStyle || document.defaultView.getComputedStyle(this.root);\n        return this.root.clientHeight - stl.paddingTop.replace(/\\D/g, '') - stl.paddingBottom.replace(/\\D/g, '');\n    }\n\n    /**\n     * _maxZlevelCanvas\n     */\n    _syncMaxZlevelCanvase() {\n        var curMaxZlevel = this.storage.getMaxZlevel();\n        if (this._maxZlevel < curMaxZlevel) {\n            for (var i = this._maxZlevel + 1; i <= curMaxZlevel; i++) {\n                this._domList[i] = this.createDom(i, 'canvas');\n                this._domRoot.insertBefore(this._domList[i], this._domList['hover']);\n                this._ctxList[i] = this._domList[i].getContext('2d');\n            }\n            this._maxZlevel = curMaxZlevel;\n        }\n    }\n\n    /**\n     * dom\n     * @param {string} id dom id \n     * @param {string} type : dom type such as canvas, div etc.\n     */\n    _createDom(id, type) {\n        var newDom = document.createElement(type);\n        newDom.style.position = 'absolute';\n        newDom.style.width = this._width + 'px';\n        newDom.style.height = this._height + 'px';\n        newDom.setAttribute('width', this._width);\n        newDom.setAttribute('height', this._height);\n        newDom.setAttribute('data-id', id);\n        return newDom;\n    }\n\n    /**\n     * \n     * @param {Object} changedZlevel zlevel\n     */\n    _brush(changedZlevel) {\n        var self = this;\n\n        return (el) => {\n            if (\n                (changedZlevel.all || changedZlevel[el.zlevel]) \n                && !el.invisible\n            ) {\n                var ctx = self._ctxList[el.zlevel];\n                if (ctx) {\n                    if (!el.onbrush || (el.onbrush && !el.onbrush(ctx, el, false))) {\n                        self.shape.get(el.shape).brush(ctx, el, false, self.update);\n                    }\n                } else {\n                    throw new Error('can not find the specfic zlevel canvas!');\n                }\n            }\n        };\n    }\n\n    /**\n     * \n     */\n    _brushHover(el) {\n        var ctx = this._ctxList['hover'];\n\n        if (!el.onbrush// onbrush\n            // onbrushfalseundefined\n            || (el.onbrush && !el.onbrush(ctx, el, true))\n        ) {\n            this.shape.get(el.shape).brush(ctx, el, true, self.update);\n        }\n    }\n\n    /**\n     * domcontext\n     * @param {Function} callback \n     */\n    render(callback) {\n\n        this._syncMaxZlevelCanvase();\n\n        this.storage.iterShape(this._brush({ all: true }), { normal: 'up' });\n\n        this.storage.clearChangedZlevel();\n\n        if (typeof callback == 'function') {\n            callback();\n        }\n        return this;\n    }\n\n    /**\n     * \n     * @param {Function} callback \n     */\n    refresh(callback) {\n        this._syncMaxZlevelCanvase();\n\n        var changedZlevel = this.storage.getChangedZlevel();\n\n        if (changedZlevel.all) {\n            this.clear();\n        } else {\n            for (var k in changedZlevel) {\n                if (this._ctxList[k]) {\n                    this._ctxList[k].clearRect(0, 0, this._width, this._height);\n                }\n            }\n        }\n\n        this.storage.iterShape(this._brush(changedZlevel).bind(this), { normal: 'up' });\n        this.storage.clearChangedZlevel();\n\n        if (typeof callback === 'function') {\n            callback();\n        }\n\n        return this;\n    }\n\n    /**\n     * \n     * @param {Array} shapeList \n     * @param {Function} callback  \n     */\n    update(shapeList, callback) {\n        console.log('update');\n\n        return this;\n    }\n\n    /**\n     * \n     */\n    resize() {\n        var width, height, dom;\n\n        this._domRoot.style.display = 'none';\n        width = this._getWidth();\n        height = this._getHeight();\n        this._domRoot.style.display = '';\n\n        if (this._width != width || this._height != height) {\n            this._width = width;\n            this._height = height;\n\n            this._domRoot.style.width = this._width + 'px';\n            this._domRoot.style.height = this._height + 'px';\n\n            for (var i in this._domList) {\n                dom = this._domList[i];\n                dom.setAttribute('width', this._width);\n                dom.setAttribute('height', this._height);\n                dom.style.width = this._width + 'px';\n                dom.style.height = this._height + 'px';\n            }\n\n            this.storage.setChangedZlevel('all');\n            this.refresh();\n        }\n        return this;\n    }\n\n\n    /**\n     * hover\n     */\n    clear() {\n        for (var k in this._ctxList) {\n            if (k == 'hover') {\n                this._ctxList[k].clearRect(0, 0, this._width, this._height);\n            }\n        }\n        return this;\n    }\n\n    /**\n     * hover\n     */\n    refreshHover() {\n        this.clearHover();\n\n        this.storage.iterShape(this._brushHover.bind(this), { hover: true });\n        this.storage.delHover();\n        return this;\n    }\n\n    /**\n     * hover\n     */\n    clearHover() {\n        this._ctxList && this._ctxList['hover'] && this._ctxList['hover'].clearRect(0, 0, this._width, this._height);\n        return this;\n    }\n\n    getDomHover() {\n        return this._domList['hover'];\n    }\n\n    dispose() {\n        this.root.innerHTML = '';\n        this.root = null;\n        this.storage = null;\n        this.shape = null;\n\n        this._domList = null;\n        this._domRoot = null;\n        this._ctxList = null;\n\n        return;\n    }\n}\n\nexport default Painter;\n\n\n// WEBPACK FOOTER //\n// ./src/Painter.js","import config from './config';\nimport EventEmitter from './core/EventEmitter';\n\nclass Handler extends EventEmitter {\n    /**\n     *  (C)\n     * @param {HTMLElement} root \n     * @param {storage} storage Storage\n     * @param {painter} painter Painter\n     * @param {Object} shape \n     *\n     * config.EVENT\n     */\n    constructor(root, storage, painter, shape) {\n        super();\n        \n        this.root = root;\n        this.storage = storage;\n        this.painter = painter;\n        this.shape = shape;\n\n        this._event;// dom\n        this._hasfound = false;// hover\n        this._lastHover = null;// hover\n        this._draggingTarget = null;\n        this._isMouseDown = false;\n        this._isDragging = false;\n        this._lastTouchMoment;\n\n        this._lastX = 0;\n        this._lastY = 0;\n        this._mouseX = 0;\n        this._mouseY =0;\n\n        this._domHover = painter.getDomHover();\n\n        this._bindEvents();\n    }\n\n    /**\n     * \n     */\n    _bindEvents() {\n        if (window.addEventListener) {\n            window.addEventListener('resize', this._resizeHandler.bind(this));\n            this.root.addEventListener('click', this._clickHandler.bind(this));\n            this.root.addEventListener('mousemove', this._mouseMoveHandler.bind(this));\n\n        } else {\n            window.attachEvent('onresize', this._resizeHandler.bind(this));\n            this.root.attachEvent('onclick', this._clickHandler.bind(this));\n            this.root.attachEvent('onmousemove', this._mouseMoveHandler.bind(this));\n        }\n    }\n\n    /**\n     * \n     * @param {event} event dom\n     */\n    _mouseMoveHandler(event) {\n        // console.log('mousemove:', event);\n\n        this._event = this._zrenderEventFixed(event);\n        this._lastX = this._mouseX;\n        this._lastY = this._mouseY;\n        this._mouseX = this.getX(this._event);\n        this._mouseY = this.getY(this._event);\n\n        this._hasfound = false;\n        this.storage.iterShape(this._findHover.bind(this), { normal: 'down' });\n\n        if (!this._hasfound) {\n            console.log('has not found!');\n\n            this._lastHover = null;\n            this.storage.delHover();\n            this.painter.clearHover();\n        }\n\n        this._dispatchAgency(this._lastHover, config.EVENT.MOUSEMOVE);\n\n        if (this._hasfound || this.storage.hasHoverShape()) {\n            console.log('brush hover');\n\n            this.painter.refreshHover();\n        }\n\n        if (this._hasfound && this._lastHover.clickable) {\n            this.root.style.cursor = 'pointer';\n        } else {\n            this.root.style.cursor = 'default';\n        }\n    }\n\n    /**\n     * \n     * @param {event} event dom\n     */\n    _resizeHandler(event) {\n        this._event = event || window.event;\n        this._lastHover = null;\n        this._isMouseDown = false;\n        this.fire(config.EVENT.RESIZE, this._event);\n    }\n\n    /**\n     * \n     * @param {event} event dom\n     */\n    _clickHandler(event) {\n        this._event = this._zrenderEventFixed(event);\n        if (!this._lastHover) {\n            this._dispatchAgency(this._lastHover, config.EVENT.CLICK);\n        } else if (this._lastHover && this._lastHover.clickable) {\n            this._dispatchAgency(this._lastHover, config.EVENT.CLICK);\n        }\n        this._mouseMoveHandler(this._event);\n    }\n\n    /**\n     * \n     */\n    _overShapeHandler() {\n        this._dispatchAgency(this._lastHover, config.EVENT.MOUSEOVER);\n    }\n\n    /**\n     * \n     */\n    _outShapeHandler() {\n        this._dispatchAgency(this._lastHover, config.EVENT.MOUSEOUT);\n    }\n\n    /**\n     * hover\n     * @param {Object} el \n     */\n    _findHover(el) {\n        if (this._draggingTarget && this._draggingTarget.id == el.id) {\n            return false;\n        }\n        if (el.__silent) {\n            return false;\n        }\n        var shapeInstance = this.shape.get(el.shape);\n        if (shapeInstance.isCover(el, this._mouseX, this._mouseY)) {\n            if (el.hoverable) {\n                this.storage.addHover(el);\n            }\n            if (this._lastHover != el) {\n                this._outShapeHandler();\n                this._lastHover = el;\n            }\n            this._overShapeHandler();\n            this._hasfound = true;\n            return true;\n        }\n        return false;\n    }\n\n\n\n\n\n\n    // domtouch\n    _zrenderEventFixed(event, isTouch) {\n        if (!isTouch) {\n            this._event = event || window.event;\n            var target = this._event.toElement\n                      || this._event.relatedTarget\n                      || this._event.srcElement\n                      || this._event.target;\n            if (target && target != this._domHover) {\n                this._event.krenderX = (typeof this._event.offsetX != 'undefined' ? this._event.offsetX : this._event.layerX) + target.offsetLeft;\n                this._event.krenderY = (typeof this._event.offsetY != 'undefined' ? this._event.offsetY : this._event.layerY) + target.offsetTop;\n            }\n        } else {\n            this._event = event;\n            var touch = this._event.type != 'touchend' ? this._event.targetTouches[0] : this._event.changedTouches[0];\n            if (touch) {\n                this._event.krenderX = touch.clientX - this.root.offsetLeft + document.body.scrollLeft;\n                this._event.krenderY = touch.clientY - this.root.offsetTop + document.body.srcollTop;\n            }\n        }\n        return this._event;\n    } \n\n    /**\n     * \n     * @param {Object} targetShape \n     * @param {string} eventName \n     * @param {Object} draggedShape \n     */\n    _dispatchAgency(targetShape, eventName, draggedShape) {\n        var eventHandler = 'on' + eventName, _event = this._event;\n\n        var eventPacket = {\n            type: eventName,\n            event: _event,\n            target: targetShape\n        };\n        \n        if (draggedShape) {\n            eventPacket.dragged = draggedShape;\n        }\n        if (targetShape) {\n            // shapeshapetrue\n            if (!targetShape[eventHandler] || !targetShape[eventHandler](eventPacket)) {\n                this.fire(eventName, _event, eventPacket);\n            }\n        } else if (!draggedShape) {\n            // hover\n            this.fire(eventName, _event);\n        }\n    }\n\n    /**\n     * \n     */\n    dispose() {\n        if (window.removeEventListener) {\n            window.removeEventListener('resize', this._resizeHandler);\n            this.root.removeEventListener('click', this._clickHandler);\n            this.root.removeEventListener('mousemove', this._mouseMoveHandler);\n        } else {\n            window.detachEvent('onresize', this._resizeHandler);\n            this.root.detachEvent('onclick', this._clickHandler);\n            this.root.detachEvent('onmousemove', this._mouseMoveHandler);\n        }\n\n        this.root = null;\n        this._domHover = null;\n        this.storage = null;\n        this.painter = null;\n        this.shape = null;\n\n        this.off();\n    }\n}\n\nexport default Handler;\n\n\n// WEBPACK FOOTER //\n// ./src/Handler.js","/**\n * kr: config\n */\n\nexport default {\n    loadingEffect : 'spin',         // loading\n    EVENT : {                       // \n        RESIZE : 'resize',          // \n        CLICK : 'click',            // \n\n        MOUSEWHEEL : 'mousewheel',  // \n        MOUSEMOVE : 'mousemove',    // \n        MOUSEOVER : 'mouseover',    // \n        MOUSEOUT : 'mouseout',      // \n        MOUSEDOWN : 'mousedown',    // \n        MOUSEUP : 'mouseup',        // \n\n        // \n        // dragstart > dragenter > dragover [> dragleave] > drop > dragend\n        DRAGSTART : 'dragstart',    // \n        DRAGEND : 'dragend',        // drop\n        DRAGENTER : 'dragenter',    // \n        DRAGOVER : 'dragover',      // \n        DRAGLEAVE : 'dragleave',    // \n        DROP : 'drop',              // \n\n        touchClickDelay : 300       // touch end - start < delay is click\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","\nclass EventEmitter {\n    constructor() {\n        this._listeners = {};\n    }\n\n    one(eventName, listener) {\n        if (!listener || !eventName) {\n            return this;\n        }\n        if (!this._listeners[eventName]) {\n            this._listeners[eventName] = [];\n        }\n        this._listeners[eventName].push({\n            'listener': listener, 'one': true\n        });\n        return this;\n    }\n\n    on(eventName, listener) {\n        if (!listener || !eventName) {\n            return this;\n        }\n        if (!this._listeners[eventName]) {\n            this._listeners[eventName] = [];\n        }\n        this._listeners[eventName].push({\n            'listener': listener, 'one': false\n        });\n        return this;\n    }\n\n    off(eventName, listener) {\n        var self = this;\n        if (!eventName) {\n            this._listeners = {};\n            return this;\n        }\n        if (listener) {\n            if (this._listeners[eventName]) {\n                var newListeners = [];\n                this._listeners[eventName].forEach((item, index) => {\n                    if (item['listener'] != listener) {\n                        newListeners.push(item);\n                    }\n                });\n                this._listeners[eventName] = newListeners;\n            }\n            if (this._listeners[eventName] && this._listeners[eventName].length === 0) {\n                delete this._listeners[eventName];\n            }\n        } else {\n            delete this._listeners[eventName];\n        }\n        return this;\n    }\n\n    fire(eventName, event, attachment) {\n        if (this._listeners[eventName]) {\n            var newListeners = [];\n            var eventPacket = attachment || {};\n            eventPacket.type = eventName;\n            eventPacket.event = event;\n\n            this._listeners[eventName].forEach(function(item, index) {\n                item['listener'](eventPacket);\n                if (!item['one']) {\n                    newListeners.push(item);\n                }\n            });\n\n            if (newListeners.length != this._listeners[eventName].length) {\n                this._listeners = newListeners;\n            }\n        }\n        return this;\n    }\n\n    getX(e) {\n        return typeof e.krenderX != 'undefined' && e.krenderX\n            || typeof e.offsetX != 'undefined' && e.offsetX\n            || typeof e.layerX != 'undefined' && e.layerX\n            || typeof e.clientX != 'undefined' && e.clientX;\n    }\n\n    getY(e) {\n        return typeof e.krenderY != 'undefined' && e.krenderY\n            || typeof e.offsetY != 'undefined' && e.offsetY\n            || typeof e.layerY != 'undefined' && e.layerY\n            || typeof e.clientY != 'undefined' && e.clientY;\n    }\n\n    getDelta(e) {\n        return typeof e.wheelDelta != 'undefined' && e.wheelDelta\n            || typeof e.detail != 'undefined' && -e.detail;\n    }\n\n    stop(e) {\n        if (e.preventDefault) {\n            e.preventDefault();\n            e.stopPropagation();\n        } else {\n            e.returnValue = false;\n        }\n    }\n}\n\nexport default EventEmitter;\n\n\n// WEBPACK FOOTER //\n// ./src/core/EventEmitter.js","import Circle from './shape/Circle';\nimport Rect from './shape/Rect';\nimport Path from './shape/Path';\nimport Line from './shape/Line';\nimport BezierCurve from './shape/BezierCurve';\nimport BrokenLine from './shape/BrokenLine';\n\n\nvar _shapeLibrary = {};\n\nvar shape = {\n    /**\n     * \n     * @param {Object} name\n     * @param {Object} clazz \n     */\n    define(name, shape) {\n        _shapeLibrary[name] = shape;\n        return this;\n    },\n\n    /**\n     * \n     * @param {Object} name\n     */\n    get(name) {\n        return _shapeLibrary[name];\n    }\n};\n\nshape.define('circle', new Circle());\nshape.define('rect', new Rect());\nshape.define('path', new Path());\nshape.define('line', new Line());\nshape.define('beziercurve', new BezierCurve());\nshape.define('brokenline', new BrokenLine());\n\n\nexport default shape;\n\n\n\n// WEBPACK FOOTER //\n// ./src/shape.js","import Shape from './Shape';\n\nclass Circle extends Shape {\n\n    constructor() {\n        super();\n        \n        this.type = 'circle';\n    }\n\n    /**\n     * \n     * @param {Context2D} ctx Canvas 2D\n     * @param {Object} style \n     */\n    buildPath(ctx, style) {\n        ctx.arc(style.x, style.y, style.r, 0, Math.PI * 2, true);\n        return this;\n    }\n\n    /**\n     * \n     * @param {Object} style\n     */\n    getRect(style) {\n        var lineWidth;\n        if (style.brushType == 'stroke' || style.brushType == 'fill') {\n            lineWidth = style.lineWidth || 1;\n        } else {\n            lineWidth = 0;\n        }\n        return {\n            x: Math.round(style.x - style.r - lineWidth / 2),\n            y: Math.round(style.y - style.r - lineWidth / 2),\n            width: style.r * 2 + lineWidth,\n            height: style.r * 2 + lineWidth\n        };\n    }\n}\n\nexport default Circle;\n\n\n// WEBPACK FOOTER //\n// ./src/shape/Circle.js","import krUtil from './util';\n\nlet _ctx;\n\nconst zoneComputeMethod = {\n    circle(area, x, y) {// \n        return (x - area.x) * (x - area.x) + (y - area.y) * (y - area.y) < area.r * area.r;\n    },\n\n    rect(area, x, y) {// \n        if (x >= area.x\n            && x <= (area.x + area.width)\n            && y >= area.y\n            && y <= (area.y + area.height)\n        ) {\n            return true;\n        }\n        return false;\n    },\n\n    path(area, x, y) {//  -> TODO\n        console.log('TODO');\n\n        return false;\n    },\n\n    line(area, x, y) {// \n        var _x1 = area.xStart;\n        var _y1 = area.yStart;\n        var _x2 = area.xEnd;\n        var _y2 = area.yEnd;\n        var _l = area.lineWidth;\n        var _a = 0;\n        var _b = _x1;\n\n        if (_x1 !== _x2) {\n            _a = (_y1 - _y2) / (_x1 - _x2);\n            _b = (_x1 * _y2 - _x2 * _y1) / (_x1 - _x2);\n        } else {\n            return Math.abs(x - _x1) <= _l / 2;\n        }\n\n        var _s = (_a * x - y + _b) * (_a * x - y + _b) / (_a * _a + 1);\n\n        return  _s <= _l / 2 * _l / 2;\n    },\n\n    beziercurve(area, x, y) {//  -> TODO\n        console.log('TODO');\n\n        return false;\n    },\n\n    brokenline(area, x, y) {\n        var pointList = area.pointList;\n        var lineArea;\n        var insideCatch = false;\n\n        for (var i = 0, l = pointList.length - 1; i < l; i++) {\n            lineArea = {\n                xStart : pointList[i][0],\n                yStart : pointList[i][1],\n                xEnd : pointList[i + 1][0],\n                yEnd : pointList[i + 1][1],\n                lineWidth : area.lineWidth\n            };\n            if (!this.rect(\n                    {\n                        x : Math.min(lineArea.xStart, lineArea.xEnd)\n                            - lineArea.lineWidth,\n                        y : Math.min(lineArea.yStart, lineArea.yEnd)\n                            - lineArea.lineWidth,\n                        width : Math.abs(lineArea.xStart - lineArea.xEnd)\n                                + lineArea.lineWidth,\n                        height : Math.abs(lineArea.yStart - lineArea.yEnd)\n                                    + lineArea.lineWidth\n                    },\n                    x,y\n                )\n            ) {\n                // \n                continue;\n            }\n\n            insideCatch = this.line(lineArea, x, y);\n            if (insideCatch) {\n                break;\n            }\n        }\n        \n        return insideCatch;\n    }\n};\n\n\n\n\n/**\n * \n */\nconst _isInsideRectangle = (area, x, y) => {\n    if (x >= area.x && x <= (area.x + area.width) && y >= area.y && y <= (area.y + area.height)) {\n        return true;\n    }\n    return false;\n};\n\nconst zoneComputer = (zoneType, area, x, y) => {\n    if (typeof zoneComputeMethod[zoneType] === 'function') {\n        return zoneComputeMethod[zoneType](area, x, y);\n    }\n};\n\n/**\n * ()\n * @param {string} shapeClazz : \n * @param {Object} area  \n * @param {number} x  \n * @param {number} y  \n */\nconst isInside = (shapeClazz, area, x, y) => {\n    if (!shapeClazz || !area) {\n        return false;\n    }\n\n    var zoneType = shapeClazz.type;\n\n    if (!_ctx) {\n        _ctx = krUtil.getContext();\n    }\n    // false\n    if (!_isInsideRectangle(shapeClazz.getRect(area), x, y)) {\n        return false;\n    }\n    \n    var zoneReturn = zoneComputer(zoneType, area, x, y);\n\n    if (typeof zoneReturn != 'undefined') {\n        return zoneReturn;\n    }\n};\n\n\n\n\n\n\n\nexport default {\n    isInside: isInside\n};\n\n\n// WEBPACK FOOTER //\n// ./src/core/area.js","import krUtil from '../core/util';\n\n\nvar highlightColor = 'rgba(255,255,0,0.5)';\n\n\n\n/**\n * \n */\nfunction getHighlightColor() {\n    return highlightColor;\n}\n\n\n\nexport default {\n\n    getHighlightColor: getHighlightColor\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/tool/color.js","import Shape from './Shape';\n\nclass Rect extends Shape {\n\n    constructor() {\n        super();\n        \n        this.type = 'rect';\n    }\n\n    /**\n     * \n     * @param {Context2D} ctx Canvas 2D\n     * @param {Object} style \n     */\n    buildPath(ctx, style) {\n        ctx.moveTo(style.x, style.y);\n        ctx.lineTo(style.x + style.width, style.y);\n        ctx.lineTo(style.x + style.width, style.y + style.height);\n        ctx.lineTo(style.x, style.y + style.height);\n        ctx.lineTo(style.x, style.y);\n        // ctx.rect(style.x, style.y, style.width, style.height);\n        return this;\n    }\n\n    /**\n     * \n     * @param {Object} style\n     */\n    getRect(style) {\n        var lineWidth;\n        if (style.brushType == 'stroke' || style.brushType == 'fill') {\n            lineWidth = style.lineWidth || 1;\n        } else {\n            lineWidth = 0;\n        }\n        return {\n            x: Math.round(style.x - lineWidth / 2),\n            y: Math.round(style.y - lineWidth / 2),\n            width: style.width + lineWidth,\n            height: style.height + lineWidth\n        };\n    }\n}\n\nexport default Rect;\n\n\n// WEBPACK FOOTER //\n// ./src/shape/Rect.js","import Shape from './Shape';\n\nclass Path extends Shape {\n\n    constructor() {\n        super();\n        \n        this.type = 'path';\n    }\n\n    _parsePathData(data) {\n        // data = \"M 0 0 L -100 100 L 100 100 Z\";\n        if (!data) {\n            return [];\n        }\n\n        var cs = data;\n\n        var cc = [\n            'm', 'M', 'l', 'L', 'v', 'V', 'h', 'H', 'z', 'Z',\n            'c', 'C', 'q', 'Q', 't', 'T', 's', 'S', 'a', 'A'\n        ];\n\n        cs = cs.replace(/  /g, ' ');\n        cs = cs.replace(/ /g, ',');\n        cs = cs.replace(/,,/g, ',');\n        // cs = \"M,0,0,L,-100,100,L,100,100,Z\";\n\n        var n;\n        for (n = 0; n < cc.length; n++) {\n            cs = cs.replace(new RegExp(cc[n], 'g'), '|' + cc[n]);\n        }\n        // cs = \"|M,0,0,|L,-100,100,|L,100,100,|Z\";\n\n        var arr = cs.split('|');\n        // arr = [\"\", \"M,0,0,\", \"L,-100,100,\", \"L,100,100,\", \"Z\"];\n\n        var ca = [];\n        var cpx = 0;\n        var cpy = 0;\n        \n        for (n = 1; n < arr.length; n++) {\n            var str = arr[n];\n            var c = str.charAt(0);\n            str = str.slice(1);\n            str = str.replace(new RegExp('e,-', 'g'), 'e-');\n\n            var p = str.split(',');\n            if (p.length > 0 && p[0] === '') {\n                p.shift();\n            }\n\n            for (var i = 0; i < p.length; i++) {\n                p[i] = parseFloat(p[i]);\n            }\n\n            while (p.length > 0) {\n                if (isNaN(p[0])) {\n                    break;\n                }\n                var cmd = null;\n                var points = [];\n\n                var ctlPtx;\n                var ctlPty;\n                var prevCmd;\n\n                var rx;\n                var ry;\n                var psi;\n                var fa;\n                var fs;\n\n                var x1 = cpx;\n                var y1 = cpy;\n\n                // convert l, H, h, V, and v to L\n                switch (c) {\n                case 'l':\n                    cpx += p.shift();\n                    cpy += p.shift();\n                    cmd = 'L';\n                    points.push(cpx, cpy);\n                    break;\n                case 'L':\n                    cpx = p.shift();\n                    cpy = p.shift();\n                    points.push(cpx, cpy);\n                    break;\n                case 'm':\n                    cpx += p.shift();\n                    cpy += p.shift();\n                    cmd = 'M';\n                    points.push(cpx, cpy);\n                    c = 'l';\n                    break;\n                case 'M':\n                    cpx = p.shift();\n                    cpy = p.shift();\n                    cmd = 'M';\n                    points.push(cpx, cpy);\n                    c = 'L';\n                    break;\n\n                case 'h':\n                    cpx += p.shift();\n                    cmd = 'L';\n                    points.push(cpx, cpy);\n                    break;\n                case 'H':\n                    cpx = p.shift();\n                    cmd = 'L';\n                    points.push(cpx, cpy);\n                    break;\n                case 'v':\n                    cpy += p.shift();\n                    cmd = 'L';\n                    points.push(cpx, cpy);\n                    break;\n                case 'V':\n                    cpy = p.shift();\n                    cmd = 'L';\n                    points.push(cpx, cpy);\n                    break;\n                case 'C':\n                    points.push(p.shift(), p.shift(), p.shift(), p.shift());\n                    cpx = p.shift();\n                    cpy = p.shift();\n                    points.push(cpx, cpy);\n                    break;\n                case 'c':\n                    points.push(\n                        cpx + p.shift(), cpy + p.shift(),\n                        cpx + p.shift(), cpy + p.shift()\n                    );\n                    cpx += p.shift();\n                    cpy += p.shift();\n                    cmd = 'C';\n                    points.push(cpx, cpy);\n                    break;\n                case 'S':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    prevCmd = ca[ca.length - 1];\n                    if (prevCmd.command === 'C') {\n                        ctlPtx = cpx + (cpx - prevCmd.points[2]);\n                        ctlPty = cpy + (cpy - prevCmd.points[3]);\n                    }\n                    points.push(ctlPtx, ctlPty, p.shift(), p.shift());\n                    cpx = p.shift();\n                    cpy = p.shift();\n                    cmd = 'C';\n                    points.push(cpx, cpy);\n                    break;\n                case 's':\n                    ctlPtx = cpx, ctlPty = cpy;\n                    prevCmd = ca[ca.length - 1];\n                    if (prevCmd.command === 'C') {\n                        ctlPtx = cpx + (cpx - prevCmd.points[2]);\n                        ctlPty = cpy + (cpy - prevCmd.points[3]);\n                    }\n                    points.push(\n                        ctlPtx, ctlPty,\n                        cpx + p.shift(), cpy + p.shift()\n                    );\n                    cpx += p.shift();\n                    cpy += p.shift();\n                    cmd = 'C';\n                    points.push(cpx, cpy);\n                    break;\n                case 'Q':\n                    points.push(p.shift(), p.shift());\n                    cpx = p.shift();\n                    cpy = p.shift();\n                    points.push(cpx, cpy);\n                    break;\n                case 'q':\n                    points.push(cpx + p.shift(), cpy + p.shift());\n                    cpx += p.shift();\n                    cpy += p.shift();\n                    cmd = 'Q';\n                    points.push(cpx, cpy);\n                    break;\n                case 'T':\n                    ctlPtx = cpx, ctlPty = cpy;\n                    prevCmd = ca[ca.length - 1];\n                    if (prevCmd.command === 'Q') {\n                        ctlPtx = cpx + (cpx - prevCmd.points[0]);\n                        ctlPty = cpy + (cpy - prevCmd.points[1]);\n                    }\n                    cpx = p.shift();\n                    cpy = p.shift();\n                    cmd = 'Q';\n                    points.push(ctlPtx, ctlPty, cpx, cpy);\n                    break;\n                case 't':\n                    ctlPtx = cpx, ctlPty = cpy;\n                    prevCmd = ca[ca.length - 1];\n                    if (prevCmd.command === 'Q') {\n                        ctlPtx = cpx + (cpx - prevCmd.points[0]);\n                        ctlPty = cpy + (cpy - prevCmd.points[1]);\n                    }\n                    cpx += p.shift();\n                    cpy += p.shift();\n                    cmd = 'Q';\n                    points.push(ctlPtx, ctlPty, cpx, cpy);\n                    break;\n                case 'A':\n                    rx = p.shift();\n                    ry = p.shift();\n                    psi = p.shift();\n                    fa = p.shift();\n                    fs = p.shift();\n\n                    x1 = cpx, y1 = cpy;\n                    cpx = p.shift(), cpy = p.shift();\n                    cmd = 'A';\n                    points = this._convertPoint(\n                        x1, y1, cpx, cpy, fa, fs, rx, ry, psi\n                    );\n                    break;\n                case 'a':\n                    rx = p.shift();\n                    ry = p.shift();\n                    psi = p.shift();\n                    fa = p.shift();\n                    fs = p.shift();\n\n                    x1 = cpx, y1 = cpy;\n                    cpx += p.shift();\n                    cpy += p.shift();\n                    cmd = 'A';\n                    points = this._convertPoint(\n                        x1, y1, cpx, cpy, fa, fs, rx, ry, psi\n                    );\n                    break;\n\n                }\n\n                ca.push({\n                    command : cmd || c,\n                    points : points\n                });\n            }\n\n            if (c === 'z' || c === 'Z') {\n                ca.push({\n                    command : 'z',\n                    points : []\n                });\n            }\n        }\n\n        return ca;\n    }\n\n    _convertPoint(x1, y1, x2, y2, fa, fs, rx, ry, psiDeg) {\n        var psi = psiDeg * (Math.PI / 180.0);\n        var xp = Math.cos(psi) * (x1 - x2) / 2.0\n                 + Math.sin(psi) * (y1 - y2) / 2.0;\n        var yp = -1 * Math.sin(psi) * (x1 - x2) / 2.0\n                 + Math.cos(psi) * (y1 - y2) / 2.0;\n\n        var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\n\n        if (lambda > 1) {\n            rx *= Math.sqrt(lambda);\n            ry *= Math.sqrt(lambda);\n        }\n\n        var f = Math.sqrt((((rx * rx) * (ry * ry))\n                - ((rx * rx) * (yp * yp))\n                - ((ry * ry) * (xp * xp))) / ((rx * rx) * (yp * yp)\n                + (ry * ry) * (xp * xp))\n            );\n\n        if (fa === fs) {\n            f *= -1;\n        }\n        if (isNaN(f)) {\n            f = 0;\n        }\n\n        var cxp = f * rx * yp / ry;\n        var cyp = f * -ry * xp / rx;\n\n        var cx = (x1 + x2) / 2.0\n                 + Math.cos(psi) * cxp\n                 - Math.sin(psi) * cyp;\n        var cy = (y1 + y2) / 2.0\n                + Math.sin(psi) * cxp\n                + Math.cos(psi) * cyp;\n\n        var vMag = function(v) {\n            return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n        };\n        var vRatio = function(u, v) {\n            return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n        };\n        var vAngle = function(u, v) {\n            return (u[0] * v[1] < u[1] * v[0] ? -1 : 1)\n                    * Math.acos(vRatio(u, v));\n        };\n        var theta = vAngle([ 1, 0 ], [ (xp - cxp) / rx, (yp - cyp) / ry ]);\n        var u = [ (xp - cxp) / rx, (yp - cyp) / ry ];\n        var v = [ (-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry ];\n        var dTheta = vAngle(u, v);\n\n        if (vRatio(u, v) <= -1) {\n            dTheta = Math.PI;\n        }\n        if (vRatio(u, v) >= 1) {\n            dTheta = 0;\n        }\n        if (fs === 0 && dTheta > 0) {\n            dTheta = dTheta - 2 * Math.PI;\n        }\n        if (fs === 1 && dTheta < 0) {\n            dTheta = dTheta + 2 * Math.PI;\n        }\n        return [ cx, cy, rx, ry, theta, dTheta, psi, fs ];\n    }\n\n    /**\n     * \n     * @param {Context2D} ctx Canvas 2D\n     * @param {Object} style \n     */\n    buildPath(ctx, style) {\n        var path = style.path;\n        var pathArray = this._parsePathData(path);\n\n        for (var i = 0; i < pathArray.length; i++) {\n            var c = pathArray[i].command;\n            var p = pathArray[i].points;\n            // \n            for (var j = 0; j < p.length; j++) {\n                if (j % 2 === 0) {\n                    p[j] += style.x;\n                } else {\n                    p[j] += style.y;\n                }\n            }\n            switch (c) {\n                case 'L':\n                    ctx.lineTo(p[0], p[1]);\n                    break;\n                case 'M':\n                    ctx.moveTo(p[0], p[1]);\n                    break;\n                case 'C':\n                    ctx.bezierCurveTo(p[0], p[1], p[2], p[3], p[4], p[5]);\n                    break;\n                case 'Q':\n                    ctx.quadraticCurveTo(p[0], p[1], p[2], p[3]);\n                    break;\n                case 'A':\n                    var cx = p[0];\n                    var cy = p[1];\n                    var rx = p[2];\n                    var ry = p[3];\n                    var theta = p[4];\n                    var dTheta = p[5];\n                    var psi = p[6];\n                    var fs = p[7];\n                    var r = (rx > ry) ? rx : ry;\n                    var scaleX = (rx > ry) ? 1 : rx / ry;\n                    var scaleY = (rx > ry) ? ry / rx : 1;\n\n                    ctx.translate(cx, cy);\n                    ctx.rotate(psi);\n                    ctx.scale(scaleX, scaleY);\n                    ctx.arc(0, 0, r, theta, theta + dTheta, 1 - fs);\n                    ctx.scale(1 / scaleX, 1 / scaleY);\n                    ctx.rotate(-psi);\n                    ctx.translate(-cx, -cy);\n                    break;\n                case 'z':\n                    ctx.closePath();\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * (TODO)\n     * @param {Object} style\n     */\n    getRect(style) {\n        var lineWidth;\n        if (style.brushType == 'stroke' || style.brushType == 'fill') {\n            lineWidth = style.lineWidth || 1;\n        }\n        else {\n            lineWidth = 0;\n        }\n        var rect = {\n            x : Math.round(style.x - lineWidth / 2),\n            y : Math.round(style.y - lineWidth / 2)\n        };\n\n        var minX = Number.MAX_VALUE;\n        var maxX = Number.MIN_VALUE;\n\n        var minY = Number.MAX_VALUE;\n        var maxY = Number.MIN_VALUE;\n\n        var pathArray = this._parsePathData(style.path);\n        for (var i = 0; i < pathArray.length; i++) {\n            var p = pathArray[i].points;\n\n            for (var j = 0; j < p.length; j++) {\n                if (j % 2 === 0) {\n                    if (p[j] < minX) {\n                        minX = p[j];\n                    }\n                    if (p[j] > maxX) {\n                        maxX = p[j];\n                    }\n                } else {\n                    if (p[j] < minY) {\n                        minY = p[j];\n                    }\n                    if (p[j] > maxY) {\n                        maxY = p[j];\n                    }\n                }\n            }\n        }\n        if (minX === Number.MAX_VALUE\n            || maxX === Number.MIN_VALUE\n            || minY === Number.MAX_VALUE\n            || maxY === Number.MIN_VALUE\n        ) {\n            rect.width = 0;\n            rect.height = 0;\n        }\n        else {\n            rect.width = maxX - minX + lineWidth;\n            rect.height = maxY - minY + lineWidth;\n        }\n\n        return rect;\n    }\n}\n\nexport default Path;\n\n\n// WEBPACK FOOTER //\n// ./src/shape/Path.js","import Shape from './Shape';\n\nclass Line extends Shape {\n\n    constructor() {\n        super();\n        \n        this.type = 'line';\n        this.brushTypeOnly = 'stroke';// \n        this.textPosition = 'end';\n    }\n\n    /**\n     * \n     * @param {Context2D} ctx Canvas 2D\n     * @param {Object} style \n     */\n    buildPath(ctx, style) {\n        if (!style.lineType || style.lineType == 'solid') {\n            //\n            ctx.moveTo(style.xStart, style.yStart);\n            ctx.lineTo(style.xEnd, style.yEnd);\n        }\n        else if (style.lineType == 'dashed'\n                || style.lineType == 'dotted'\n        ) {\n            //  by loutongbing@baidu.com\n            var lineWidth = style.lineWidth || 1;\n            var dashPattern = [\n                lineWidth * (style.lineType == 'dashed' ? 6 : 1),\n                lineWidth * 4\n            ];\n            var fromX = style.xStart;\n            var toX = style.xEnd;\n            var fromY = style.yStart;\n            var toY = style.yEnd;\n            var dx = toX - fromX;\n            var dy = toY - fromY;\n            var angle = Math.atan2(dy, dx);\n            var x = fromX;\n            var y = fromY;\n            var idx = 0;\n            var draw = true;\n            var dashLength;\n            var nx;\n            var ny;\n\n            ctx.moveTo(fromX, fromY);\n            while (!((dx < 0 ? x <= toX : x >= toX)\n                      && (dy < 0 ? y <= toY : y >= toY))\n            ) {\n                dashLength = dashPattern[idx++ % dashPattern.length];\n                nx = x + (Math.cos(angle) * dashLength);\n                x = dx < 0 ? Math.max(toX, nx) : Math.min(toX, nx);\n                ny = y + (Math.sin(angle) * dashLength);\n                y = dy < 0 ? Math.max(toY, ny) : Math.min(toY, ny);\n                if (draw) {\n                    ctx.lineTo(x, y);\n                }\n                else {\n                    ctx.moveTo(x, y);\n                }\n                draw = !draw;\n            }\n        }\n        \n        return this;\n    }\n\n    /**\n     * \n     * @param {Object} style\n     */\n    getRect(style) {\n        var lineWidth = style.lineWidth || 1;\n\n        return {\n            x : Math.min(style.xStart, style.xEnd) - lineWidth,\n            y : Math.min(style.yStart, style.yEnd) - lineWidth,\n            width : Math.abs(style.xStart - style.xEnd) + lineWidth,\n            height : Math.abs(style.yStart - style.yEnd) + lineWidth\n        };\n    }\n}\n\nexport default Line;\n\n\n// WEBPACK FOOTER //\n// ./src/shape/Line.js","import Shape from './Shape';\n\nclass BezierCurve extends Shape {\n\n    constructor() {\n        super();\n        \n        this.type = 'beziercurve';\n        this.brushTypeOnly = 'stroke';// \n        this.textPosition = 'end';\n    }\n\n    /**\n     * \n     * @param {Context2D} ctx Canvas 2D\n     * @param {Object} style \n     */\n    buildPath(ctx, style) {\n        ctx.moveTo(style.xStart, style.yStart);\n        if (typeof style.cpX2 != 'undefined'\n            && typeof style.cpY2 != 'undefined'\n        ) {\n            ctx.bezierCurveTo(\n                style.cpX1, style.cpY1,\n                style.cpX2, style.cpY2,\n                style.xEnd, style.yEnd\n            );\n        }\n        else {\n            ctx.quadraticCurveTo(\n                style.cpX1, style.cpY1,\n                style.xEnd, style.yEnd\n            );\n        }\n        return this;\n    }\n\n    /**\n     * \n     * @param {Object} style\n     */\n    getRect(style) {\n        var _minX = Math.min(style.xStart, style.xEnd, style.cpX1);\n        var _minY = Math.min(style.yStart, style.yEnd, style.cpY1);\n        var _maxX = Math.max(style.xStart, style.xEnd, style.cpX1);\n        var _maxY = Math.max(style.yStart, style.yEnd, style.cpY1);\n        var _x2 = style.cpX2;\n        var _y2 = style.cpY2;\n\n        if (typeof _x2 != 'undefined'\n            && typeof _y2 != 'undefined'\n        ) {\n            _minX = Math.min(_minX, _x2);\n            _minY = Math.min(_minY, _y2);\n            _maxX = Math.max(_maxX, _x2);\n            _maxY = Math.max(_maxY, _y2);\n        }\n\n        var lineWidth = style.lineWidth || 1;\n\n        return {\n            x: _minX - lineWidth,\n            y: _minY - lineWidth,\n            width: _maxX - _minX + lineWidth,\n            height: _maxY - _minY + lineWidth\n        };\n    }\n}\n\nexport default BezierCurve;\n\n\n// WEBPACK FOOTER //\n// ./src/shape/BezierCurve.js","import Shape from './Shape';\n\nclass BrokenLine extends Shape {\n\n    constructor() {\n        super();\n        \n        this.type = 'brokenline';\n        this.brushTypeOnly = 'stroke';// \n        this.textPosition = 'end';\n    }\n\n    /**\n     * \n     * @param {Context2D} ctx Canvas 2D\n     * @param {Object} style \n     */\n    buildPath(ctx, style) {\n        var pointList = style.pointList;\n        if (pointList.length < 2) {\n            // 2~\n            return;\n        }\n        if (!style.lineType || style.lineType == 'solid') {\n            //\n            ctx.moveTo(pointList[0][0],pointList[0][1]);\n            for (var i = 1, l = pointList.length; i < l; i++) {\n                ctx.lineTo(pointList[i][0],pointList[i][1]);\n            }\n        }\n        else if (style.lineType == 'dashed'\n                || style.lineType == 'dotted'\n        ) {\n            //  by loutongbing@baidu.com\n            var lineWidth = style.lineWidth || 1;\n            var dashPattern = [\n                lineWidth * (style.lineType == 'dashed' ? 6 : 1),\n                lineWidth * 4\n            ];\n            ctx.moveTo(pointList[0][0],pointList[0][1]);\n            for (var i = 1, l = pointList.length; i < l; i++) {\n                var fromX = pointList[i - 1][0];\n                var toX = pointList[i][0];\n                var fromY = pointList[i - 1][1];\n                var toY = pointList[i][1];\n                var dx = toX - fromX;\n                var dy = toY - fromY;\n                var angle = Math.atan2(dy, dx);\n                var x = fromX;\n                var y = fromY;\n                var idx = 0;\n                var draw = true;\n                var dashLength;\n                var nx;\n                var ny;\n\n                while (!((dx < 0 ? x <= toX : x >= toX)\n                        && (dy < 0 ? y <= toY : y >= toY))\n                ) {\n                    dashLength = dashPattern[\n                        idx++ % dashPattern.length\n                    ];\n                    nx = x + (Math.cos(angle) * dashLength);\n                    x = dx < 0 ? Math.max(toX, nx) : Math.min(toX, nx);\n                    ny = y + (Math.sin(angle) * dashLength);\n                    y = dy < 0 ? Math.max(toY, ny) : Math.min(toY, ny);\n                    if (draw) {\n                        ctx.lineTo(x, y);\n                    }\n                    else {\n                        ctx.moveTo(x, y);\n                    }\n                    draw = !draw;\n                }\n            }\n        }\n        return this;\n    }\n\n    /**\n     * \n     * @param {Object} style\n     */\n    getRect(style) {\n        var minX =  Number.MAX_VALUE;\n        var maxX =  Number.MIN_VALUE;\n        var minY = Number.MAX_VALUE;\n        var maxY = Number.MIN_VALUE;\n\n        var pointList = style.pointList;\n        for(var i = 0, l = pointList.length; i < l; i++) {\n            if (pointList[i][0] < minX) {\n                minX = pointList[i][0];\n            }\n            if (pointList[i][0] > maxX) {\n                maxX = pointList[i][0];\n            }\n            if (pointList[i][1] < minY) {\n                minY = pointList[i][1];\n            }\n            if (pointList[i][1] > maxY) {\n                maxY = pointList[i][1];\n            }\n        }\n\n        var lineWidth;\n        if (style.brushType == 'stroke' || style.brushType == 'fill') {\n            lineWidth = style.lineWidth || 1;\n        }\n        else {\n            lineWidth = 0;\n        }\n        return {\n            x: Math.round(minX - lineWidth / 2),\n            y: Math.round(minY - lineWidth / 2),\n            width: maxX - minX + lineWidth,\n            height: maxY - minY + lineWidth\n        };\n    }\n}\n\nexport default BrokenLine;\n\n\n// WEBPACK FOOTER //\n// ./src/shape/BrokenLine.js"],"sourceRoot":""}