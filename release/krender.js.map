{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 7c9141fd77e69657319b","webpack:///./index.js","webpack:///./src/krender.js","webpack:///./src/core/guid.js","webpack:///./src/Storage.js","webpack:///./src/core/util.js","webpack:///./src/Painter.js","webpack:///./src/Handler.js","webpack:///./src/config.js","webpack:///./src/core/EventEmitter.js","webpack:///./src/shape.js","webpack:///./src/shape/Circle.js","webpack:///./src/shape/Shape.js"],"names":[],"mappings":"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","file":"krender.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"krender\"] = factory();\n\telse\n\t\troot[\"krender\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"release\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7c9141fd77e69657319b","import krender from './src/krender';\n\nmodule.exports = krender;\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","import guid from './core/guid';\nimport Storage from './Storage';\nimport Painter from './Painter';\nimport Handler from './Handler';\nimport shape from './shape';\n\nvar instances = {};\n\nvar krender = {};\n\nkrender.version = '0.0.1';\n\n/**\n * krender初始化\n * 不让外部直接new KRender实例，提供全局可控同时减少全局污染和降低命名冲突的风险\n * @param {HTMLElement} dom dom对象\n * @param {Object} opts \n * @return {KRender} KRender实例\n */\nkrender.init = (dom, opts) => {\n    var kr = new KRender(guid(), dom, opts);\n    instances[kr.id] = kr;\n    return kr;\n};\n\n/**\n * kr实例销毁\n * 可以通过zr.dispose(kr)销毁指定KRender实例\n * 当然也可以直接kr.dispose()自己销毁\n * @param {KRender} kr KRender对象，不传则销毁全部\n */\nkrender.dispose = (kr) => {\n    if (kr) {\n        kr.dispose();\n    } else {\n        for (var key in instances) {\n            if (instances.hasOwnProperty(key)) {\n                instances[key].dispose();\n            }\n        }\n        instances = {};\n    }\n    return krender;\n};\n\n/**\n * 获取kr实例\n * @param {string} id KRender对象索引\n */\nkrender.getInstance = (id) => {\n    return instances[id];\n};\n\n/**\n * 删除kr实例，KRender实例dispose时会调用\n * @param {string} id KRender对象索引\n */\nkrender.delInstance = (id) => {\n    delete instances[id];\n};\n\n/**\n * KRender接口类\n * storage（M）、painter（V）、handler（C）为内部私有类，外部接口不可见\n *\n * @param {string} id 唯一标识\n * @param {HTMLElement} dom dom对象\n * @param {Object} params 个性化参数\n */\nclass KRender {\n    constructor(id, dom, opts) {\n\n        opts = opts || {};\n\n        this.dom = dom;\n\n        this.id = id;\n\n        var shapeLibrary;\n\n        if (typeof opts.shape == 'undefined') {\n            shapeLibrary = shape;\n        } else {\n            shapeLibrary = {};\n            for (var s in opts.shape) {\n                shapeLibrary[s] = opts.shape[s];\n            }\n            shapeLibrary.get = function(name) {\n                return shapeLibrary[name] || shape.get(name);\n            };\n        }\n\n        this.storage = new Storage(shapeLibrary);\n        this.painter = new Painter(dom, this.storage, shapeLibrary);\n        this.handler = new Handler(dom, this.storage, this.painter, shapeLibrary);\n\n\n    }\n\n    /**\n     * 添加图形形状\n     * @param {Object} shape 形状对象，可用属性全集，详见各shape\n     */\n    addShape(shape) {\n        this.storage.add(shape);\n        return this;\n    }\n\n    /**\n     * 渲染\n     * @param {Function} callback  渲染结束后回调函数\n     */\n    render(callback) {\n        this.painter.render(callback);\n        return this;\n    }\n\n    /**\n     * 释放当前KRender实例（删除包括dom，数据、显示和事件绑定），dispose后KRender不可用\n     */\n    dispose() {\n        this.storage.disponse();\n        this.storage = null;\n\n        this.painter.dispose();\n        this.painter = null;\n\n        this.handler.dispose();\n        this.handler = null;\n\n        krender.delInstance(this.id);\n    }\n}\n\nexport default krender;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/krender.js","var idStart = 0x0907;\n\nexport default function () {\n    return idStart++;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/guid.js","import util from './core/util';\n\n\nclass Storage {\n    /**\n     * 内容仓库 (M)\n     * @param {Object} shape 图形库\n     */\n    constructor(shape) {\n        // 图形数据id自增基础\n        this._isBase = 0;\n        // 所有常规形状，id索引的map\n        this._elements = {};\n        // 所有形状的z轴方向排列，提高遍历性能，zElements[0]的形状在zElements[1]形状下方\n        this._zElements = [];\n        // 高亮层形状，不稳定，动态增删，数组位置也是z轴方向，靠前显示在下方\n        this._hoverElements = [];\n        // 最大zlevel\n        this._maxZlevel = 0;\n        // 有数据改变的zlevel\n        this._changedZlevel = {};\n    }\n\n    /**\n     * 唯一标识id生成\n     * @param {string} idHead 标识前缀\n     */\n    newShapeId(idHead) {\n        return (idHead || '') + (++this._isBase);\n    }\n\n    /**\n     * 快速判断标志~\n     * e.__silent 是否需要hover判断\n     * e.__needTransform 是否需要进行transform\n     * e.style.__rect 区域矩阵缓存，修改后清空，重新计算一次\n     */\n    _mark(el) {\n        if (\n            el.hoverable || el.onclick || el.draggable \n            || el.onmousemove || el.onmouseover || el.onmouseout || el.onmousedown || el.onmouseup \n            || el.ondragenter || el.ondragover || el.ondragleave || el.ondrop\n        ) {\n            el.__silent = false;\n        } else {\n            el.__silent = true;\n        }\n\n        if (\n            Math.abs(el.rotation[0]) > 0.0001\n            || Math.abs(el.position[0]) > 0.0001 || Math.abs(el.position[1]) > 0.0001\n            || Math.abs(el.scale[0] - 1) > 0.0001 || Math.abs(el.scale[1] - 1) > 0.0001\n        ) {\n            el.__needTransform = true;\n        } else {\n            el.__needTransform = false;\n        }\n\n        el.style = el.style || {};\n        el.style.__rect = null;\n    }\n\n    /**\n     * 添加\n     * @param {Object} shape 参数\n     */\n    add(shape) {\n        var self = this;\n        var el = {\n            'shape': 'circle',// 形状\n            'id': self.newShapeId(),// 唯一标识\n            'zlevel': 0,// z轴位置\n            'draggable': false,// 可拖拽\n            'clickable': false,// 可点击\n            'hoverable': true,// 可悬浮\n            'position': [0, 0],\n            'rotation': [0, 0, 0],\n            'scale': [1, 1, 0, 0]\n        };\n\n        util.merge(el, shape, {\n            'overwrite': true, 'recursive': true\n        });\n\n        this._mark(el);\n\n        this._elements[el.id] = el;\n        this._zElements[el.zlevel] = this._zElements[el.zlevel] || [];\n        this._zElements[el.zlevel].push(el);\n\n        this._maxZlevel = Math.max(this._maxZlevel, el.zlevel);\n        this._changedZlevel[el.zlevel] = true;\n    }\n\n    /**\n     * 遍历迭代器\n     * @param {Function} fn 迭代回调函数，return true终止迭代\n     * @param {Object} options 迭代参数，缺省为仅降序遍历常规形状\n     *     hover: true 是否迭代高亮层数据\n     *     normal: 'down' | 'up' | 'free' 是否迭代常规数据，迭代时是否指定及z轴顺序\n     */\n    iterShape(fn, options) {\n        if (!options) {\n            options = {\n                hover: false, normal: 'down'\n            };\n        }\n        if (options.hover) {\n            // 高亮层数据遍历\n            for (var i = 0, l = this._hoverElements.length; i < l; i++) {\n                if (fn(this._hoverElements[i])) {\n                    return this;\n                }\n            }\n        }\n        var zlist, len;\n\n        if (typeof options.normal != 'undefined') {\n            // z轴遍历: 'down' | 'up' | 'free'\n            switch (options.normal) {\n                case 'down':\n                    // 降序遍历，高层优先\n                    for (var l = this._zElements.length - 1; l >= 0; l--) {\n                        zlist = this._zElements[l];\n                        if (zlist) {\n                            len = zlist.length;\n                            while (len--) {\n                                if (fn(zlist[len])) {\n                                    return this;\n                                }\n                            }\n                        }\n                    }\n                    break;\n                case 'up':\n                    // 升序遍历，底层优先\n                    for (var i = 0, l = this._zElements.length; i < l; i++) {\n                        zlist = this._zElements[i];\n                        if (zlist) {\n                            len = zlist.length;\n                            for (var k = 0; k < len; k++) {\n                                if (fn(zlist[k])) {\n                                    return this;\n                                }\n                            }\n                        }\n                    }\n                    break;\n                default:\n                    // 无序遍历\n                    for (var i in this._elements) {\n                        if (fn(this._elements[i])) {\n                            return this;\n                        }\n                    }\n                    break;\n            }\n        }\n        return this;\n    }\n\n    getMaxZlevel() {\n        return this._maxZlevel;\n    }\n\n    getChangedZlevel() {\n        return this._changedZlevel;\n    }\n\n    clearChangedZlevel() {\n        this._changedZlevel = {};\n        return this;\n    }\n\n    /**\n     * 释放\n     */\n    disponse() {\n        this._elements = null;\n        this._zElements = null;\n        this._hoverElements = null;\n    }\n}\n\nexport default Storage;\n\n\n// WEBPACK FOOTER //\n// ./src/Storage.js","/**\n * 对一个object进行深度拷贝\n *\n * @param {Any} source 需要进行拷贝的对象\n * @return {Any} 拷贝后的新对象\n */\nfunction clone(source) {\n    // buildInObject, 用于处理无法遍历Date等对象的问题\n    var buildInObject = {\n        '[object Function]': 1,\n        '[object RegExp]': 1,\n        '[object Date]': 1,\n        '[object Error]': 1,\n        '[object CanvasGradient]': 1\n    };\n    var result = source;\n    var i;\n    var len;\n    if (!source\n        || source instanceof Number\n        || source instanceof String\n        || source instanceof Boolean\n    ) {\n        return result;\n    }\n    else if (source instanceof Array) {\n        result = [];\n        var resultLen = 0;\n        for (i = 0, len = source.length; i < len; i++) {\n            result[resultLen++] = this.clone(source[i]);\n        }\n    }\n    else if ('object' == typeof source) {\n        if(buildInObject[Object.prototype.toString.call(source)]\n            || source.__nonRecursion\n        ) {\n            return result;\n        }\n        result = {};\n        for (i in source) {\n            if (source.hasOwnProperty(i)) {\n                result[i] = this.clone(source[i]);\n            }\n        }\n    }\n    return result;\n}\n\n/**\n * 合并源对象的属性到目标对象\n * modify from Tangram\n * @param {*} target 目标对象\n * @param {*} source 源对象\n * @param {Object} optOptions 选项\n * @param {boolean} optOptions.overwrite 是否覆盖\n * @param {boolean} optOptions.recursive 是否递归\n * @param {boolean} optOptions.whiteList 白名单，如果定义，则仅处理白名单属性\n */\nvar merge = (function() {\n    // buildInObject, 用于处理无法遍历Date等对象的问题\n    var buildInObject = {\n        '[object Function]': 1,\n        '[object RegExp]': 1,\n        '[object Date]': 1,\n        '[object Error]': 1,\n        '[object CanvasGradient]': 1\n    };\n    function mergeItem(target, source, index, overwrite, recursive) {\n        if (source.hasOwnProperty(index)) {\n            if (recursive\n                && typeof target[index] == 'object'\n                && buildInObject[\n                    Object.prototype.toString.call(target[index])\n                ] != 1\n            ) {\n                // 如果需要递归覆盖，就递归调用merge\n                merge(\n                    target[index],\n                    source[index],\n                    {\n                        'overwrite': overwrite,\n                        'recursive': recursive\n                    }\n                );\n            } else if (overwrite || !(index in target)) {\n                // 否则只处理overwrite为true，或者在目标对象中没有此属性的情况\n                target[index] = source[index];\n            }\n        }\n    }\n\n    return function(target, source, optOptions){\n        var i = 0,\n            options = optOptions || {},\n            overwrite = options['overwrite'],\n            whiteList = options['whiteList'],\n            recursive = options['recursive'],\n            len;\n\n        // 只处理在白名单中的属性\n        if (whiteList && whiteList.length) {\n            len = whiteList.length;\n            for (; i < len; ++i) {\n                mergeItem(\n                    target, source, whiteList[i], overwrite, recursive\n                );\n            }\n        } else {\n            for (i in source) {\n                mergeItem(target, source, i, overwrite, recursive);\n            }\n        }\n        return target;\n    };\n})();\n\nvar _ctx;\n\nfunction getContext() {\n    if (!_ctx) {\n        if (!document.createElement('canvas').getContext\n            && G_vmlCanvasManager\n        ) {\n            var _div = document.createElement('div');\n            _div.style.position = 'absolute';\n            _div.style.top = '-1000px';\n            document.body.appendChild(_div);\n\n            _ctx = G_vmlCanvasManager.initElement(_div)\n                        .getContext('2d');\n        }\n        else {\n            _ctx = document.createElement('canvas').getContext('2d');\n        }\n    }\n    return _ctx;\n}\n\n\nvar _canvas;\nvar _pixelCtx;\nvar _width;\nvar _height;\nvar _offsetX = 0;\nvar _offsetY = 0;\n\n/**\n * 获取像素拾取专用的上下文\n * @return {Object} 上下文\n */\nfunction getPixelContext() {\n    if (!_pixelCtx) {\n        _canvas = document.createElement('canvas');\n        _width = _canvas.width;\n        _height = _canvas.height;\n        _pixelCtx = _canvas.getContext('2d');\n    }\n    return _pixelCtx;\n}\n\n/**\n * 如果坐标处在_canvas外部，改变_canvas的大小\n * @param {number} x : 横坐标\n * @param {number} y : 纵坐标\n * 注意 修改canvas的大小 需要重新设置translate\n */\nfunction adjustCanvasSize(x, y) {\n    // 每次加的长度\n    var _v = 100;\n    var _flag = false;\n\n    if (x + _offsetX > _width) {\n        _width = x + _offsetX + _v;\n        _canvas.width = _width;\n        _flag = true;\n    }\n\n    if (y + _offsetY > _height) {\n        _height = y + _offsetY + _v;\n        _canvas.height = _height;\n        _flag = true;\n    }\n\n    if (x < -_offsetX) {\n        _offsetX = Math.ceil(-x / _v) * _v;\n        _width += _offsetX;\n        _canvas.width = _width;\n        _flag = true;\n    }\n\n    if (y < -_offsetY) {\n        _offsetY = Math.ceil(-y / _v) * _v;\n        _height += _offsetY;\n        _canvas.height = _height;\n        _flag = true;\n    }\n\n    if (_flag) {\n        _pixelCtx.translate(_offsetX, _offsetY);\n    }\n}\n\n/**\n * 获取像素canvas的偏移量\n * @return {Object} 偏移量\n */\nfunction getPixelOffset() {\n    return {\n        x : _offsetX,\n        y : _offsetY\n    };\n}\n\n/**\n * 查询数组中元素的index\n */\nfunction indexOf(array, value){\n    if (array.indexOf) {\n        return array.indexOf(value);\n    }\n    for(var i = 0, len=array.length; i<len; i++) {\n        if (array[i] === value) {\n            return i;\n        }\n    }\n    return -1;\n}\n\nexport default {\n    clone: clone,\n    merge: merge,\n    getContext: getContext,\n\n    getPixelContext: getPixelContext,\n    getPixelOffset: getPixelOffset,\n    adjustCanvasSize: adjustCanvasSize,\n\n    indexOf: indexOf\n};\n\n\n// WEBPACK FOOTER //\n// ./src/core/util.js","\nclass Painter {\n    /**\n     * 绘图类 (V)\n     * @param {HTMLElement} root 绘图区域\n     * @param {storage} storage Storage实例\n     * @param {Object} shape 图形库\n     */\n    constructor(root, storage, shape) {\n        this.root = root;\n        this.storage = storage;\n        this.shape = shape;\n\n        this._domList = {};// canvas dom元素\n        this._ctxList = {};// canvas 2D context对象，与domList对应\n\n        this._maxZlevel = 0;// 最大zlevel，缓存记录\n\n        this._domRoot = document.createElement('div');\n        this._domRoot.onselectstart = function() {\n            return false;\n        };\n\n        this._width;// 宽，缓存记录\n        this._height;// 高，缓存记录\n\n        this._init();\n    }\n\n    _init() {\n        this.root.innerHTML = '';\n        this._domRoot.innerHTML = '';\n\n        this._width = this._getWidth();\n        this._height = this._getHeight();\n        \n        this._domRoot.style.position = 'relative';\n        this._domRoot.style.overflow = 'hidden';\n        this._domRoot.style.width = this._width + 'px';\n        this._domRoot.style.height = this._height + 'px';\n\n        this.root.appendChild(this._domRoot);\n\n        this._domList = {};\n        this._ctxList = {};\n\n        this._maxZlevel = this.storage.getMaxZlevel();\n\n        this._domList['bg'] = this._createDom('bg', 'div');\n        this._domRoot.appendChild(this._domList['bg']);\n\n        for (var i = 0; i <= this._maxZlevel; i++) {\n            this._domList[i] = this._createDom(i, 'canvas');\n            this._domRoot.appendChild(this._domList[i]);\n            this._ctxList[i] = this._domList[i].getContext('2d');\n        }\n\n        this._domList['hover'] = this._createDom('hover', 'canvas');\n        this._domList['hover'].id = '_zrender_hover_';\n        this._domRoot.appendChild(this._domList['hover']);\n        this._ctxList['hover'] = this._domList['hover'].getContext('2d');\n    }\n\n    _getWidth() {\n        var stl = this.root.currentStyle || document.defaultView.getComputedStyle(this.root);\n        return this.root.clientWidth - stl.paddingLeft.replace(/\\D/g, '') - stl.paddingRight.replace(/\\D/g, '');\n    }\n\n    _getHeight() {\n        var stl = this.root.currentStyle || document.defaultView.getComputedStyle(this.root);\n        return this.root.clientHeight - stl.paddingTop.replace(/\\D/g, '') - stl.paddingBottom.replace(/\\D/g, '');\n    }\n\n    /**\n     * 检查_maxZlevel是否变大，如是则同步创建需要的Canvas\n     */\n    _syncMaxZlevelCanvase() {\n        var curMaxZlevel = this.storage.getMaxZlevel();\n        if (this._maxZlevel < curMaxZlevel) {\n            for (var i = this._maxZlevel + 1; i <= curMaxZlevel; i++) {\n                this._domList[i] = this.createDom(i, 'canvas');\n                this._domRoot.insertBefore(this._domList[i], this._domList['hover']);\n                this._ctxList[i] = this._domList[i].getContext('2d');\n            }\n            this._maxZlevel = curMaxZlevel;\n        }\n    }\n\n    /**\n     * 创建dom\n     * @param {string} id dom id 待用\n     * @param {string} type : dom type， such as canvas, div etc.\n     */\n    _createDom(id, type) {\n        var newDom = document.createElement(type);\n        newDom.style.position = 'absolute';\n        newDom.style.width = this._width + 'px';\n        newDom.style.height = this._height + 'px';\n        newDom.setAttribute('width', this._width);\n        newDom.setAttribute('height', this._height);\n        newDom.setAttribute('data-id', id);\n        return newDom;\n    }\n\n    /**\n     * 刷画图形\n     * @param {Object} changedZlevel 需要更新的zlevel索引\n     */\n    _brush(changedZlevel) {\n        var self = this;\n\n        return (el) => {\n            if (\n                (changedZlevel.all || changedZlevel[el.zlevel]) \n                && !el.invisible\n            ) {\n                var ctx = self._ctxList[el.zlevel];\n                if (ctx) {\n                    if (!el.onbrush || (el.onbrush && !el.onbrush(ctx, el, false))) {\n                        self.shape.get(el.shape).brush(ctx, el, false, self.update);\n                    }\n                } else {\n                    throw new Error('can not find the specfic zlevel canvas!');\n                }\n            }\n        };\n    }\n\n    /**\n     * 首次绘图，创建各种dom和context\n     * @param {Function} callback 绘画结束后的回调函数\n     */\n    render(callback) {\n\n        this._syncMaxZlevelCanvase();\n\n        this.storage.iterShape(this._brush({ all: true }), { normal: 'up' });\n\n        this.storage.clearChangedZlevel();\n\n        if (typeof callback == 'function') {\n            callback();\n        }\n        return this;\n    }\n\n    /**\n     * 刷新\n     * @param {Function} callback 刷新结束后的回调函数\n     */\n    refresh(callback) {\n        console.log('refresh');\n        \n        return this;\n    }\n\n    /**\n     * 视图更新\n     * @param {Array} shapeList 需要更新的图形元素列表\n     * @param {Function} callback  视图更新后回调函数\n     */\n    update(shapeList, callback) {\n        console.log('update');\n\n        return this;\n    }\n\n    getDomHover() {\n        return this._domList['hover'];\n    }\n\n    dispose() {\n        this.root.innerHTML = '';\n        this.root = null;\n        this.storage = null;\n        this.shape = null;\n\n        this._domList = null;\n        this._domRoot = null;\n        this._ctxList = null;\n\n        return;\n    }\n}\n\nexport default Painter;\n\n\n// WEBPACK FOOTER //\n// ./src/Painter.js","import config from './config';\nimport EventEmitter from './core/EventEmitter';\n\nclass Handler extends EventEmitter {\n    /**\n     * 控制类 (C)\n     * @param {HTMLElement} root 绘图区域\n     * @param {storage} storage Storage实例\n     * @param {painter} painter Painter实例\n     * @param {Object} shape 图形库\n     *\n     * 分发事件支持详见config.EVENT\n     */\n    constructor(root, storage, painter, shape) {\n        super();\n        \n        this.root = root;\n        this.storage = storage;\n        this.painter = painter;\n        this.shape = shape;\n\n        this._event;// 原生dom事件\n        this._hasfound = false;// 是否找到hover的图形元素\n        this._lastHover = null;// 最后一个hover的图形元素\n        this._draggingTarget = null;\n        this._isMouseDown = false;\n        this._isDragging = false;\n        this._lastTouchMoment;\n\n        this._lastX = 0;\n        this._lastY = 0;\n        this._mouseX = 0;\n        this._mouseY =0;\n\n        this._domHover = painter.getDomHover();\n\n        this._bindEvents();\n    }\n\n    /**\n     * 初始化，事件绑定\n     */\n    _bindEvents() {\n        if (window.addEventListener) {\n            window.addEventListener('resize', this._resizeHandler.bind(this));\n            this.root.addEventListener('click', this._clickHandler.bind(this));\n            this.root.addEventListener('mousemove', this._mouseMoveHandler.bind(this));\n\n        } else {\n            window.attachEvent('onresize', this._resizeHandler.bind(this));\n            this.root.attachEvent('onclick', this._clickHandler.bind(this));\n            this.root.attachEvent('onmousemove', this._mouseMoveHandler.bind(this));\n        }\n    }\n\n    /**\n     * 鼠标（手指）移动响应函数\n     * @param {event} event dom事件对象\n     */\n    _mouseMoveHandler(event) {\n        console.log('mousemove:', event);\n    }\n\n    /**\n     * 窗口大小改变响应函数\n     * @param {event} event dom事件对象\n     */\n    _resizeHandler(event) {\n        this._event = event || window.event;\n        this._lastHover = null;\n        this._isMouseDown = false;\n        this.fire(config.EVENT.RESIZE, this._event);\n    }\n\n    /**\n     * 点击事件\n     * @param {event} event dom事件对象\n     */\n    _clickHandler(event) {\n        this._event = this._zrenderEventFixed(event);\n        if (!this._lastHover) {\n            this._dispatchAgency(this._lastHover, config.EVENT.CLICK);\n        } else if (this._lastHover && this._lastHover.clickable) {\n            this._dispatchAgency(this._lastHover, config.EVENT.CLICK);\n        }\n        this._mouseMoveHandler(this._event);\n    }\n\n    // 如果存在第三方嵌入的一些dom触发的事件，或touch事件，需要转换一下事件坐标\n    _zrenderEventFixed(event, isTouch) {\n        if (!isTouch) {\n            this._event = event || window.event;\n            var target = this._event.toElement\n                      || this._event.relatedTarget\n                      || this._event.srcElement\n                      || this._event.target;\n            if (target && target != this._domHover) {\n                this._event.krenderX = (typeof this._event.offsetX != 'undefined' ? this._event.offsetX : this._event.layerX) + target.offsetLeft;\n                this._event.krenderY = (typeof this._event.offsetY != 'undefined' ? this._event.offsetY : this._event.layerY) + target.offsetTop;\n            }\n        } else {\n            this._event = event;\n            var touch = this._event.type != 'touchend' ? this._event.targetTouches[0] : this._event.changedTouches[0];\n            if (touch) {\n                this._event.krenderX = touch.clientX - this.root.offsetLeft + document.body.scrollLeft;\n                this._event.krenderY = touch.clientY - this.root.offsetTop + document.body.srcollTop;\n            }\n        }\n        return this._event;\n    } \n\n    /**\n     * 事件分发代理\n     * @param {Object} targetShape 目标图形元素\n     * @param {string} eventName 事件名称\n     * @param {Object} draggedShape 拖拽事件特有，当前被拖拽图形元素\n     */\n    _dispatchAgency(targetShape, eventName, draggedShape) {\n        var eventHandler = 'on' + eventName, _event = this._event;\n\n        var eventPacket = {\n            type: eventName,\n            event: _event,\n            target: targetShape\n        };\n        \n        if (draggedShape) {\n            eventPacket.dragged = draggedShape;\n        }\n        if (targetShape) {\n            // “不存在shape级事件”或“存在shape级事件但事件回调返回非true”\n            if (!targetShape[eventHandler] || !targetShape[eventHandler](eventPacket)) {\n                this.fire(eventName, _event, eventPacket);\n            }\n        } else if (!draggedShape) {\n            // 无hover目标，无拖拽对象，原生事件分发\n            this.fire(eventName, _event);\n        }\n    }\n\n    /**\n     * 释放\n     */\n    dispose() {\n        if (window.removeEventListener) {\n            window.removeEventListener('resize', this._resizeHandler);\n            this.root.removeEventListener('click', this._clickHandler);\n            this.root.removeEventListener('mousemove', this._mouseMoveHandler);\n        } else {\n            window.detachEvent('onresize', this._resizeHandler);\n            this.root.detachEvent('onclick', this._clickHandler);\n            this.root.detachEvent('onmousemove', this._mouseMoveHandler);\n        }\n\n        this.root = null;\n        this._domHover = null;\n        this.storage = null;\n        this.painter = null;\n        this.shape = null;\n\n        this.off();\n    }\n}\n\nexport default Handler;\n\n\n// WEBPACK FOOTER //\n// ./src/Handler.js","/**\n * kr: config默认配置项\n */\n\nexport default {\n    loadingEffect : 'spin',         // 默认loading特效\n    EVENT : {                       // 支持事件列表\n        RESIZE : 'resize',          // 窗口大小变化\n        CLICK : 'click',            // 鼠标按钮被（手指）按下，事件对象是：目标图形元素或空\n\n        MOUSEWHEEL : 'mousewheel',  // 鼠标滚轮变化，事件对象是：目标图形元素或空\n        MOUSEMOVE : 'mousemove',    // 鼠标（手指）被移动，事件对象是：目标图形元素或空\n        MOUSEOVER : 'mouseover',    // 鼠标移到某图形元素之上，事件对象是：目标图形元素\n        MOUSEOUT : 'mouseout',      // 鼠标从某图形元素移开，事件对象是：目标图形元素\n        MOUSEDOWN : 'mousedown',    // 鼠标按钮（手指）被按下，事件对象是：目标图形元素或空\n        MOUSEUP : 'mouseup',        // 鼠标按键（手指）被松开，事件对象是：目标图形元素或空\n\n        // 一次成功元素拖拽的行为事件过程是：\n        // dragstart > dragenter > dragover [> dragleave] > drop > dragend\n        DRAGSTART : 'dragstart',    // 开始拖拽时触发，事件对象是：被拖拽图形元素\n        DRAGEND : 'dragend',        // 拖拽完毕时触发（在drop之后触发），事件对象是：被拖拽图形元素\n        DRAGENTER : 'dragenter',    // 拖拽图形元素进入目标图形元素时触发，事件对象是：目标图形元素\n        DRAGOVER : 'dragover',      // 拖拽图形元素在目标图形元素上移动时触发，事件对象是：目标图形元素\n        DRAGLEAVE : 'dragleave',    // 拖拽图形元素离开目标图形元素时触发，事件对象是：目标图形元素\n        DROP : 'drop',              // 拖拽图形元素放在目标图形元素内时触发，事件对象是：目标图形元素\n\n        touchClickDelay : 300       // touch end - start < delay is click\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","\nclass EventEmitter {\n    constructor() {\n        this._listeners = {};\n    }\n\n    one(eventName, listener) {\n        if (!listener || !eventName) {\n            return this;\n        }\n        if (!this._listeners[eventName]) {\n            this._listeners[eventName] = [];\n        }\n        this._listeners[eventName].push({\n            'listener': listener, 'one': true\n        });\n        return this;\n    }\n\n    on(eventName, listener) {\n        if (!listener || !eventName) {\n            return this;\n        }\n        if (!this._listeners[eventName]) {\n            this._listeners[eventName] = [];\n        }\n        this._listeners[eventName].push({\n            'listener': listener, 'one': false\n        });\n        return this;\n    }\n\n    off(eventName, listener) {\n        var self = this;\n        if (!eventName) {\n            this._listeners = {};\n            return this;\n        }\n        if (listener) {\n            if (this._listeners[eventName]) {\n                var newListeners = [];\n                this._listeners[eventName].forEach((item, index) => {\n                    if (item['listener'] != listener) {\n                        newListeners.push(item);\n                    }\n                });\n                this._listeners[eventName] = newListeners;\n            }\n            if (this._listeners[eventName] && this._listeners[eventName].length === 0) {\n                delete this._listeners[eventName];\n            }\n        } else {\n            delete this._listeners[eventName];\n        }\n        return this;\n    }\n\n    fire(eventName, event, attachment) {\n        if (this._listeners[eventName]) {\n            var newListeners = [];\n            var eventPacket = attachment || {};\n            eventPacket.type = eventName;\n            eventPacket.event = event;\n\n            this._listeners[eventName].forEach(function(item, index) {\n                item['listener'](eventPacket);\n                if (!item['one']) {\n                    newListeners.push(item);\n                }\n            });\n\n            if (newListeners.length != this._listeners[eventName].length) {\n                this._listeners = newListeners;\n            }\n        }\n        return this;\n    }\n\n    getX(e) {\n        return typeof e.krenderX != 'undefined' && e.krenderX\n            || typeof e.offsetX != 'undefined' && e.offsetX\n            || typeof e.layerX != 'undefined' && e.layerX\n            || typeof e.clientX != 'undefined' && e.clientX;\n    }\n\n    getY(e) {\n        return typeof e.krenderY != 'undefined' && e.krenderY\n            || typeof e.offsetY != 'undefined' && e.offsetY\n            || typeof e.layerY != 'undefined' && e.layerY\n            || typeof e.clientY != 'undefined' && e.clientY;\n    }\n\n    getDelta(e) {\n        return typeof e.wheelDelta != 'undefined' && e.wheelDelta\n            || typeof e.detail != 'undefined' && -e.detail;\n    }\n\n    stop(e) {\n        if (e.preventDefault) {\n            e.preventDefault();\n            e.stopPropagation();\n        } else {\n            e.returnValue = false;\n        }\n    }\n}\n\nexport default EventEmitter;\n\n\n// WEBPACK FOOTER //\n// ./src/core/EventEmitter.js","import Circle from './shape/Circle'; \n\nvar _shapeLibrary = {};\n\nvar shape = {\n    /**\n     * 定义图形实现\n     * @param {Object} name\n     * @param {Object} clazz 图形实现\n     */\n    define(name, shape) {\n        _shapeLibrary[name] = shape;\n        return this;\n    },\n\n    /**\n     * 获取图形实现\n     * @param {Object} name\n     */\n    get(name) {\n        return _shapeLibrary[name];\n    }\n};\n\nshape.define('circle', new Circle());\n\nexport default shape;\n\n\n\n// WEBPACK FOOTER //\n// ./src/shape.js","import Shape from './Shape';\n\nclass Circle extends Shape {\n\n    constructor() {\n        super();\n        \n        this.type = 'circle';\n    }\n\n    /**\n     * 创建圆形路径\n     * @param {Context2D} ctx Canvas 2D上下文\n     * @param {Object} style 样式\n     */\n    buildPath(ctx, style) {\n        ctx.arc(style.x, style.y, style.r, 0, Math.PI * 2, true);\n        return this;\n    }\n\n    /**\n     * 返回矩形区域，用于局部刷新和文字定位\n     * @param {Object} style\n     */\n    getRect(style) {\n        var lineWidth;\n        if (style.brushType == 'stroke' || style.brushType == 'fill') {\n            lineWidth = style.lineWidth || 1;\n        } else {\n            lineWidth = 0;\n        }\n        return {\n            x: Math.round(style.x - style.r - lineWidth / 2),\n            y: Math.round(style.y - style.r - lineWidth / 2),\n            width: style.r * 2 + lineWidth,\n            height: style.r * 2 + lineWidth\n        };\n    }\n}\n\nexport default Circle;\n\n\n// WEBPACK FOOTER //\n// ./src/shape/Circle.js","/**\n * 1.基础配置\n * 2.变换\n * 3.样式\n * 4.交互属性\n * 5.事件\n * \n */\nclass Shape {\n\n    constructor() {\n\n    }\n\n    /**\n     * 画刷\n     * @param ctx       画布句柄\n     * @param el         形状实体\n     * @param isHighlight   是否为高亮状态\n     * @param updateCallback 需要异步加载资源的shape可以通过这个callback(el)\n     *                       让painter更新视图，shape.brush没用，需要的话重载brush\n     */\n    brush(ctx, el, isHighlight) {\n        var style = el.style || {};\n        var highlightStyle = el.highlightStyle || {};\n\n        if (this.brushTypeOnly) {\n            style.brushType = this.brushTypeOnly;\n        }\n\n        if (isHighlight) {\n            style = this.getHighlightStyle(style, highlightStyle, this.brushTypeOnly);\n        }\n\n        if (this.brushTypeOnly == 'stroke') {\n            style.strokeColor = style.strokeColor || style.color;\n        }\n\n        ctx.save();\n        this.setContext(ctx, style);\n\n        if (el.__needTransform) {\n            ctx.transform.apply(ctx, this.updateTransform(el));\n        }\n\n        ctx.beginPath();\n        this.buildPath(ctx, style);\n        if (this.brushTypeOnly != 'stroke') {\n            ctx.closePath();\n        }\n\n        switch (style.brushType) {\n            case 'fill':\n                ctx.fill();\n                break;\n            case 'stroke':\n                ctx.stroke();\n                break;\n            case 'both':\n                ctx.stroke();\n                ctx.fill();\n                break;\n            default:\n                ctx.fill();\n        }\n\n        if (style.text) {\n            this.drawText(ctx, style, el.style);\n        }\n\n        ctx.restore();\n\n        return this;\n    }\n\n    /**\n     * 画布通用设置\n     * @param ctx       画布句柄\n     * @param style     通用样式\n     */\n    setContext(ctx, style) {\n        if (style.color) {\n            ctx.fillStyle = style.color;\n        }\n        if (style.strokeColor) {\n            ctx.strokeColor = style.strokeColor;\n        }\n        if (typeof style.opcacity != 'undefined') {\n            ctx.globalAlpha = style.opcacity;\n        }\n        if (style.lineCap) {\n            ctx.lineCap = style.lineCap;\n        }\n        if (style.lineJoin) {\n            ctx.lineCap = style.lineJoin;\n        }\n        if (style.miterLimit) {\n            ctx.miterLimit = style.miterLimit;\n        }\n        if (typeof style.lineWidth != 'undefined') {\n            ctx.lineWidth = style.lineWidth;\n        }\n        if (typeof style.shadowBlur != 'undefined') {\n            ctx.shadowBlur = style.shadowBlur;\n        }\n        if (style.shadowColor) {\n            ctx.shadowColor = style.shadowColor;\n        }\n        if (typeof style.shadowOffsetX != 'undefined') {\n            ctx.shadowOffsetX = style.shadowOffsetX;\n        }\n        if (typeof style.shadowOffsetY != 'undefined') {\n            ctx.shadowOffsetY = style.shadowOffsetY;\n        }\n    }\n\n    /**\n     * 附加文本\n     * @param {Context2D} ctx Canvas 2D上下文\n     * @param {Object} style 样式\n     * @param {Object} normalStyle 默认样式，用于定位文字显示\n     */\n    drawText(ctx, style, normalStyle) {\n        console.log('drawText:', style.text);\n    }\n\n    getHighlightStyle() {\n\n    }\n\n    getHighlightZoom() {\n\n    }\n\n    drift() {\n\n    }\n\n    isCover() {\n\n    }\n\n    updateTransform() {\n        console.log('updateTransform');\n    }\n}\n\nexport default Shape;\n\n\n// WEBPACK FOOTER //\n// ./src/shape/Shape.js"],"sourceRoot":""}